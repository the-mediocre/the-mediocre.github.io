<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.12.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="人们愿意相信一个土匪叫张麻子，而不愿意相信他叫张牧之">
<meta property="og:type" content="website">
<meta property="og:title" content="BLOG">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="BLOG">
<meta property="og:description" content="人们愿意相信一个土匪叫张麻子，而不愿意相信他叫张牧之">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="The-mediocre">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>BLOG</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">BLOG</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">会当临绝顶，一览众山小</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">The-mediocre</p>
  <div class="site-description" itemprop="description">人们愿意相信一个土匪叫张麻子，而不愿意相信他叫张牧之</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">28</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">49</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/07/%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95%E6%89%8B%E5%86%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="The-mediocre">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
      <meta itemprop="description" content="人们愿意相信一个土匪叫张麻子，而不愿意相信他叫张牧之">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BLOG">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/07/%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95%E6%89%8B%E5%86%99/" class="post-title-link" itemprop="url">面试常见题目</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-04-07 20:06:31" itemprop="dateCreated datePublished" datetime="2022-04-07T20:06:31Z">2022-04-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-12 12:02:22" itemprop="dateModified" datetime="2022-06-12T12:02:22Z">2022-06-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">面试</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%9D%A2%E8%AF%95/%E6%89%8B%E5%86%99/" itemprop="url" rel="index"><span itemprop="name">手写</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.6k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h6 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myReduce</span> = <span class="keyword">function</span> (<span class="params">fn, initValue</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(fn) !== <span class="string">&#x27;[object Function]&#x27;</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;传入需为函数&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">let</span> arr = <span class="variable language_">this</span></span><br><span class="line">            <span class="keyword">let</span> initIndex, acc</span><br><span class="line">            initIndex = <span class="variable language_">arguments</span>.<span class="property">length</span> === <span class="number">1</span> ? <span class="number">1</span> : <span class="number">0</span></span><br><span class="line">            acc = <span class="variable language_">arguments</span>.<span class="property">length</span> === <span class="number">1</span> ? arr[<span class="number">0</span>] : initValue</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = initIndex; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                acc = <span class="title function_">fn</span>(acc, arr[i], i, arr)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> acc</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>



<h5 id="将数组转化为树"><a href="#将数组转化为树" class="headerlink" title="将数组转化为树"></a>将数组转化为树</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [</span><br><span class="line">            &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&#x27;标题1&#x27;</span>, <span class="attr">parent_id</span>: <span class="number">0</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">title</span>: <span class="string">&#x27;标题2&#x27;</span>, <span class="attr">parent_id</span>: <span class="number">0</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">title</span>: <span class="string">&#x27;标题2-1&#x27;</span>, <span class="attr">parent_id</span>: <span class="number">2</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">title</span>: <span class="string">&#x27;标题3-1&#x27;</span>, <span class="attr">parent_id</span>: <span class="number">3</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">title</span>: <span class="string">&#x27;标题4-1&#x27;</span>, <span class="attr">parent_id</span>: <span class="number">4</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">id</span>: <span class="number">6</span>, <span class="attr">title</span>: <span class="string">&#x27;标题2-2&#x27;</span>, <span class="attr">parent_id</span>: <span class="number">2</span> &#125;,</span><br><span class="line">        ]</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">convert</span>(<span class="params">list</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> result = []</span><br><span class="line">            <span class="keyword">const</span> map = list.<span class="title function_">reduce</span>(<span class="function">(<span class="params">pre, cur</span>) =&gt;</span> &#123;</span><br><span class="line">                pre[cur.<span class="property">id</span>] = cur</span><br><span class="line">                <span class="keyword">return</span> pre</span><br><span class="line">            &#125;, &#123;&#125;)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> list) &#123;</span><br><span class="line">                <span class="keyword">if</span> (item.<span class="property">parent_id</span> === <span class="number">0</span>) &#123;</span><br><span class="line">                    result.<span class="title function_">push</span>(item)</span><br><span class="line">                    <span class="comment">// continue</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (item.<span class="property">parent_id</span> <span class="keyword">in</span> map) &#123;</span><br><span class="line">                    <span class="keyword">const</span> parent = map[item.<span class="property">parent_id</span>]</span><br><span class="line">                    parent.<span class="property">children</span> = parent.<span class="property">children</span> || []</span><br><span class="line">                    parent.<span class="property">children</span>.<span class="title function_">push</span>(item)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">jsonToTree</span>(<span class="params">data</span>) &#123;</span><br><span class="line">            <span class="comment">// 初始化结果数组，并判断输入数据的格式</span></span><br><span class="line">            <span class="keyword">let</span> result = []</span><br><span class="line">            <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(data)) &#123;</span><br><span class="line">                <span class="keyword">return</span> result</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 使用map，将当前对象的id与当前对象对应存储起来</span></span><br><span class="line">            <span class="keyword">let</span> map = &#123;&#125;;</span><br><span class="line">            data.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                map[item.<span class="property">id</span>] = item;</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="comment">// </span></span><br><span class="line">            data.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> parent = map[item.<span class="property">pid</span>];</span><br><span class="line">                <span class="keyword">if</span> (parent) &#123;</span><br><span class="line">                    (parent.<span class="property">children</span> || (parent.<span class="property">children</span> = [])).<span class="title function_">push</span>(item);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    result.<span class="title function_">push</span>(item);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/20/%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="The-mediocre">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
      <meta itemprop="description" content="人们愿意相信一个土匪叫张麻子，而不愿意相信他叫张牧之">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BLOG">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/20/%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">算法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-04-20 09:21:51" itemprop="dateCreated datePublished" datetime="2022-04-20T09:21:51Z">2022-04-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-12 12:02:22" itemprop="dateModified" datetime="2022-06-12T12:02:22Z">2022-06-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>常见时间复杂度:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shift,<span class="attr">unshift</span>:<span class="title function_">O</span>(n)</span><br><span class="line"><span class="comment">//数组是有序解构unshift操作非常慢</span></span><br></pre></td></tr></table></figure>


</blockquote>
<p>树的广度优先遍历(bfs)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">bfs</span>(<span class="params">root</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!root)<span class="keyword">return</span> </span><br><span class="line">    <span class="keyword">const</span> queue=[root]</span><br><span class="line">    <span class="keyword">let</span> arr=[]</span><br><span class="line">    <span class="keyword">while</span>(queue.<span class="property">length</span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> item=queue.<span class="title function_">shift</span>()</span><br><span class="line">        arr.<span class="title function_">push</span>(item)</span><br><span class="line">        <span class="keyword">if</span>(root.<span class="property">left</span>)queue.<span class="title function_">push</span>(root.<span class="property">left</span>)</span><br><span class="line">        <span class="keyword">if</span>(root.<span class="property">right</span>)queue.<span class="title function_">push</span>(root.<span class="property">right</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>树的先序遍历</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">walkPreOrder</span>(<span class="params">root</span>)&#123;</span><br><span class="line">  <span class="keyword">if</span>(root === <span class="literal">null</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> stack = [root]</span><br><span class="line">  <span class="keyword">while</span>(stack.<span class="property">length</span>)&#123;</span><br><span class="line">      <span class="keyword">const</span> item = stack.<span class="title function_">pop</span>()</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(item)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 左边的子节点被推到右边的子节点之后，因为我们想先打印左边的子节点，所以它在栈中必须在右边的子节点之上。</span></span><br><span class="line">      <span class="keyword">if</span>(item.<span class="property">right</span>) stack.<span class="title function_">push</span>(item.<span class="property">right</span>)</span><br><span class="line">      <span class="keyword">if</span>(item.<span class="property">left</span>) stack.<span class="title function_">push</span>(item.<span class="property">left</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>中序遍历</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">walkInOrder</span>(<span class="params">root</span>)&#123;</span><br><span class="line">  <span class="keyword">if</span>(root === <span class="literal">null</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> stack = []</span><br><span class="line">  <span class="keyword">let</span> current = root</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(stack.<span class="property">length</span> || current)&#123;</span><br><span class="line">      <span class="keyword">while</span>(current)&#123;</span><br><span class="line">         stack.<span class="title function_">push</span>(current)</span><br><span class="line">         current = current.<span class="property">left</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> last = stack.<span class="title function_">pop</span>()</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(last)</span><br><span class="line"></span><br><span class="line">      current = last.<span class="property">right</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="递归——分而治之算法-D-amp-C"><a href="#递归——分而治之算法-D-amp-C" class="headerlink" title="递归——分而治之算法(D&amp;C)"></a>递归——分而治之算法(D&amp;C)</h3><ol>
<li>递归求数组之和</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//计算数组的和</span></span><br><span class="line">        <span class="keyword">let</span> arr=[<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>]</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">arr</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr.<span class="property">length</span>===<span class="number">0</span>)<span class="keyword">return</span>  <span class="number">0</span></span><br><span class="line">            <span class="keyword">let</span> item=arr.<span class="title function_">pop</span>()</span><br><span class="line">            <span class="keyword">return</span> item+<span class="title function_">fn</span>(arr)</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>快速排序</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">quickSort</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr.<span class="property">length</span> &lt; <span class="number">2</span>) <span class="keyword">return</span> arr</span><br><span class="line">            <span class="keyword">let</span> mid = <span class="title class_">Math</span>.<span class="title function_">floor</span>(arr.<span class="property">length</span> / <span class="number">2</span>)</span><br><span class="line">            <span class="keyword">let</span> provide = arr.<span class="title function_">splice</span>(mid, <span class="number">1</span>)[<span class="number">0</span>]<span class="comment">//取出的是个数组</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(provide)</span><br><span class="line">            <span class="keyword">let</span> left = []</span><br><span class="line">            <span class="keyword">let</span> right = []</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> arr) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i &lt; provide) &#123;</span><br><span class="line">                    left.<span class="title function_">push</span>(i)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    right.<span class="title function_">push</span>(i)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">quickSort</span>(left).<span class="title function_">concat</span>([provide], <span class="title function_">quickSort</span>(right));</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>





<h3 id="回溯算法"><a href="#回溯算法" class="headerlink" title="回溯算法"></a>回溯算法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数组arr</span></span><br><span class="line"><span class="comment">//path路径[1,2,3,4]==&gt;[1,2],[1,3],[1,4],...//n为4,k为2</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">backtracking</span>(<span class="params">n,k,startIndex</span>)&#123;<span class="comment">//n是题目数组的长度//k组合的大小</span></span><br><span class="line">    <span class="keyword">if</span>(path.<span class="property">length</span>===k)&#123;</span><br><span class="line">        res.<span class="title function_">push</span>([...path])<span class="comment">//拷贝一份</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i=startIndex;i&lt;n,i++)&#123;</span><br><span class="line">            path.<span class="title function_">push</span>(nums[i])<span class="comment">//处理节点</span></span><br><span class="line">            <span class="title function_">backtracking</span>()<span class="comment">//递归</span></span><br><span class="line">            path.<span class="title function_">pop</span>()<span class="comment">//回</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//(n - (k - path.length) + 1)剪枝</span></span><br></pre></td></tr></table></figure>



<p>组合+剪枝</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输入：n = 4, k = 2</span></span><br><span class="line">输出：</span><br><span class="line">[</span><br><span class="line">  [<span class="number">2</span>,<span class="number">4</span>],</span><br><span class="line">  [<span class="number">3</span>,<span class="number">4</span>],</span><br><span class="line">  [<span class="number">2</span>,<span class="number">3</span>],</span><br><span class="line">  [<span class="number">1</span>,<span class="number">2</span>],</span><br><span class="line">  [<span class="number">1</span>,<span class="number">3</span>],</span><br><span class="line">  [<span class="number">1</span>,<span class="number">4</span>],</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> combine = <span class="keyword">function</span>(<span class="params">n, k</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> res=[]</span><br><span class="line"><span class="keyword">let</span> path=[]</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">backtracking</span>(<span class="params">n,k,startIndex</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(path.<span class="property">length</span>===k)&#123;</span><br><span class="line">        res.<span class="title function_">push</span>([...path])</span><br><span class="line">        <span class="keyword">return</span> </span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i =startIndex;i&lt;=n - (k - path.<span class="property">length</span>) + <span class="number">1</span>;i++)&#123;</span><br><span class="line">            path.<span class="title function_">push</span>(i)</span><br><span class="line">            <span class="title function_">backtracking</span>(n,k,i+<span class="number">1</span>)</span><br><span class="line">            path.<span class="title function_">pop</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">backtracking</span>(n,k,<span class="number">1</span>)</span><br><span class="line"><span class="keyword">return</span> res</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>括号匹配</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">        <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">str</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> s1 = <span class="string">&#x27;(&#123;[&#x27;</span></span><br><span class="line">            <span class="keyword">let</span> s2 = <span class="string">&#x27;)&#125;]&#x27;</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!str.<span class="property">length</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">            <span class="keyword">let</span> stack = []</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> str) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (s1.<span class="title function_">includes</span>(i)) &#123;</span><br><span class="line">                    stack.<span class="title function_">push</span>(i)</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (s2.<span class="title function_">includes</span>(i)) &#123;</span><br><span class="line">                    <span class="keyword">const</span> top = stack[stack.<span class="property">length</span> - <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (<span class="title function_">match</span>(top, i)) &#123;</span><br><span class="line">                        stack.<span class="title function_">pop</span>()</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> stack.<span class="property">length</span> === <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//辅助函数</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">match</span>(<span class="params">left, right</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (left === <span class="string">&#x27;(&#x27;</span> &amp;&amp; right === <span class="string">&#x27;)&#x27;</span>) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">            <span class="keyword">if</span> (left === <span class="string">&#x27;&#123;&#x27;</span> &amp;&amp; right === <span class="string">&#x27;&#125;&#x27;</span>) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">            <span class="keyword">if</span> (left === <span class="string">&#x27;[&#x27;</span> &amp;&amp; right === <span class="string">&#x27;]&#x27;</span>) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>



<h2 id="数据结构-栈"><a href="#数据结构-栈" class="headerlink" title="数据结构:栈"></a>数据结构:栈</h2><p>适用题目:括号匹配;基本计算器; </p>
<p>题目中的情形需要对于数组最后的两个元素进行运算;</p>
<p>进阶:单调栈:维护一个单调的数组:</p>
<p>题目适用于下一个最大,</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stack=[]</span><br><span class="line"><span class="keyword">let</span> index=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">of</span> arr)&#123;</span><br><span class="line">    <span class="keyword">while</span>(stack.<span class="property">length</span>&amp;&amp;i&gt;||<span class="language-xml">&lt;stack[index-1])&#123;</span></span><br><span class="line"><span class="language-xml">        stack.pop()</span></span><br><span class="line"><span class="language-xml">        //</span></span><br><span class="line"><span class="language-xml">        index--</span></span><br><span class="line"><span class="language-xml">    &#125;</span></span><br><span class="line"><span class="language-xml">    stack.push(i)</span></span><br><span class="line"><span class="language-xml">    index++</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml">//时间复杂度:每个元素只会被push一次,最多pop一次故o(n)</span></span><br></pre></td></tr></table></figure>

<h2 id="数据结构-数组-链表"><a href="#数据结构-数组-链表" class="headerlink" title="数据结构:数组,链表"></a>数据结构:数组,链表</h2><ol>
<li>前缀和数组</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> preSum=<span class="keyword">new</span> <span class="title class_">Array</span>(arr.<span class="property">length</span>+<span class="number">1</span>).<span class="title function_">fill</span>(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;arr.<span class="property">length</span>;i++)&#123;</span><br><span class="line">    preSum[i+<span class="number">1</span>]=preSum[i]+arr[i]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//preSum数组即是arr的前缀和,相减即可得到数据</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>双指针链表</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fast=head</span><br><span class="line"><span class="keyword">let</span> slow=head</span><br><span class="line"><span class="comment">//慢指针走了快指针的一半</span></span><br><span class="line"><span class="keyword">while</span>(fast&amp;&amp;fast.<span class="property">next</span>)</span><br><span class="line">    fast=fast.<span class="property">next</span>.<span class="property">next</span></span><br><span class="line">	slow=slow.<span class="property">next</span></span><br><span class="line">	<span class="keyword">if</span>(fast===slow)&#123;</span><br><span class="line">        <span class="comment">//逻辑</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>滑动窗口</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
















































































































































































































      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/25/vue%E5%8E%9F%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="The-mediocre">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
      <meta itemprop="description" content="人们愿意相信一个土匪叫张麻子，而不愿意相信他叫张牧之">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BLOG">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/25/vue%E5%8E%9F%E7%90%86/" class="post-title-link" itemprop="url">原理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-04-25 15:24:45" itemprop="dateCreated datePublished" datetime="2022-04-25T15:24:45Z">2022-04-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-12 12:02:22" itemprop="dateModified" datetime="2022-06-12T12:02:22Z">2022-06-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/vue%E5%8E%9F%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">vue原理</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>7.3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>7 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="响应式原理"><a href="#响应式原理" class="headerlink" title="响应式原理"></a>响应式原理</h3><blockquote>
<p>对象响应式</p>
<p>通过入口函数observe判断是否是对象,—&gt;new Observe()循环递归对象的属性调用defineReactive(obj,key)—&gt;进入函数的时候会调用observe判断obj[key]是不是对象,三则之间循环调用&#x2F;&#x2F;   在observe函数中会判断是不是数组如果是.则会改写原型,并且调用observeArray方法判断子项是不是数组</p>
</blockquote>
<hr>
<blockquote>
<p>收集依赖派发更新</p>
<p>在模板引擎运行时,当用户使用插值语法,此时new Watcher(),然后会触发watcher的get方法,重写get方法让他获取自己收集的数据,在获取收集数据时,就会触发defineReactive中的get方法,所以我们重写他的get方法让他可以将自身 (在Watcher中的get我们用window.target&#x3D;this(实例)命名)   收集到dep中,(_ <em>ob</em> _他身上储存着自己的依赖数组)&#x2F;&#x2F;此时Watcher方法get还没有走完,所以需要在最后把他为null,其他的数据也需要进行收集依赖,(抢夺window.target)&#x2F;&#x2F;&#x2F;   window.target就是Watcher实例(this&#x2F;&#x2F;此时并未完成实例化无new Watcher)</p>
<p>_ <em>ob</em> _的存在让他们可以简单的获取Observe的方法 ob &#x3D; new Observer(value)</p>
</blockquote>
<hr>
<blockquote>
<p>数组重写</p>
<p>创造一个中介arrayMethods&#x3D;Object.create(ArrayPrototype)    再将数据转化为响应式的时候(Observer)判断传入的不是数组,如果是强制改变原型Object.setPrototypeOf(value, arrayMethods)</p>
<p>重写方法就是添加更新视图操作,并且判断是不是添加数据splice,unshift,push,添加的数据也可能是响应式的.所以调用_ <em>ob</em> _中的observeArray方法循环监视(若在此通知更新视图,则需要dep.notify())</p>
</blockquote>
<hr>
<blockquote>
<p>工具函数的使用</p>
<p>def调用此函数可以改写数据并且让数据无法被遍历def(obj,value,false)</p>
<p>parsePath调用此函数可以识别点语法,obj.name.firstName</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数组的操作</span></span><br><span class="line">        <span class="keyword">let</span> arrayPrototype = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span></span><br><span class="line">        <span class="keyword">const</span> arrayMethods = <span class="title class_">Object</span>.<span class="title function_">create</span>(arrayPrototype)</span><br><span class="line">        <span class="title class_">MethodsNeedChange</span> = [</span><br><span class="line">            <span class="string">&#x27;push&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;pop&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;unshift&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;shift&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;splice&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;sort&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;reverse&#x27;</span></span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//将一个属性变化为响应式</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">defineReactive</span>(<span class="params">obj, key, val = obj[key]</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> dep = <span class="keyword">new</span> <span class="title class_">Dep</span>()<span class="comment">//闭包//让get.set调用</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//观察新增的和修改的val//子元素形成递归</span></span><br><span class="line">            <span class="keyword">let</span> childOb = <span class="title function_">observe</span>(val)</span><br><span class="line">            <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, key, &#123;</span><br><span class="line">                <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;监视&#x27;</span>, key)</span><br><span class="line">                    <span class="comment">//判断是否是依赖收集阶段</span></span><br><span class="line">                    <span class="keyword">if</span> (<span class="title class_">Dep</span>.<span class="property">target</span>) &#123;</span><br><span class="line">                        dep.<span class="title function_">depend</span>()</span><br><span class="line">                        <span class="keyword">if</span> (childOb) &#123;</span><br><span class="line">                            childOb.<span class="property">dep</span>.<span class="title function_">depend</span>()</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> val</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="title function_">set</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;修改&#x27;</span>, key, newVal)</span><br><span class="line">                    val = newVal</span><br><span class="line">                    childOb = <span class="title function_">observe</span>(newVal)</span><br><span class="line">                    dep.<span class="title function_">notify</span>()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将对象转化为响应式</span></span><br><span class="line">        <span class="keyword">class</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">            <span class="title function_">constructor</span>(<span class="params">value</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">dep</span> = <span class="keyword">new</span> <span class="title class_">Dep</span>()</span><br><span class="line">                <span class="comment">//给内部添加__obj__属性,并且不可枚举</span></span><br><span class="line">                <span class="title function_">def</span>(value, <span class="string">&#x27;__ob__&#x27;</span>, <span class="variable language_">this</span>, <span class="literal">false</span>)</span><br><span class="line">                <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(value)) &#123;</span><br><span class="line">                    <span class="title class_">Object</span>.<span class="title function_">setPrototypeOf</span>(value, arrayMethods)</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">observeArray</span>(value)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">walk</span>(value)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//遍历对象的属性</span></span><br><span class="line">            <span class="title function_">walk</span>(<span class="params">value</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> value) &#123;</span><br><span class="line">                    <span class="title function_">defineReactive</span>(value, key)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//数组的特殊操作</span></span><br><span class="line">            <span class="title function_">observeArray</span>(<span class="params">value</span>) &#123;<span class="comment">//防止数组长度发生变化let len</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = value.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">                    <span class="title function_">observe</span>(value[i])</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//入口函数,判断,递归的开始</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">observe</span>(<span class="params">value</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> value !== <span class="string">&#x27;object&#x27;</span>) <span class="keyword">return</span></span><br><span class="line">            <span class="keyword">var</span> ob<span class="comment">//存储实例属性</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> value.<span class="property">__ob__</span> !== <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">                ob = value.<span class="property">__ob__</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                ob = <span class="keyword">new</span> <span class="title class_">Observer</span>(value)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ob</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//工具函数让属性不被遍历</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">def</span>(<span class="params">obj, key, value, enumerable</span>) &#123;</span><br><span class="line">            <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, key, &#123;</span><br><span class="line">                value,</span><br><span class="line">                enumerable</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//数组方法的改写</span></span><br><span class="line">        <span class="title class_">MethodsNeedChange</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">methodName</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> original = arrayPrototype[methodName]</span><br><span class="line"></span><br><span class="line">            <span class="title function_">def</span>(arrayMethods, methodName, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">const</span> ob = <span class="variable language_">this</span>.<span class="property">__ob__</span><span class="comment">//这里面有很多方法用于响应式</span></span><br><span class="line">                <span class="comment">//push/splice/unshift</span></span><br><span class="line">                <span class="keyword">let</span> inserted = []</span><br><span class="line">                <span class="keyword">switch</span> (methodName) &#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&#x27;push&#x27;</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&#x27;unshift&#x27;</span>:</span><br><span class="line">                        inserted = [...<span class="variable language_">arguments</span>]</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&#x27;splice&#x27;</span>:</span><br><span class="line">                        inserted = [...<span class="variable language_">arguments</span>].<span class="title function_">slice</span>(<span class="number">2</span>)</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (inserted.<span class="property">length</span>) &#123;</span><br><span class="line">                    ob.<span class="title function_">observeArray</span>(inserted)</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;来来来&#x27;</span>)</span><br><span class="line">                <span class="keyword">let</span> res = original.<span class="title function_">apply</span>(<span class="variable language_">this</span>, <span class="variable language_">arguments</span>)</span><br><span class="line">                ob.<span class="property">dep</span>.<span class="title function_">notify</span>()<span class="comment">//ob中保存dep属性</span></span><br><span class="line">                <span class="keyword">return</span> res</span><br><span class="line">            &#125;, <span class="literal">false</span>)</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//收集依赖</span></span><br><span class="line">        <span class="keyword">let</span> uid1 = <span class="number">0</span></span><br><span class="line">        <span class="keyword">class</span> <span class="title class_">Dep</span> &#123;</span><br><span class="line">            <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="comment">//存储自己的订阅则</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">subs</span> = []<span class="comment">//存放watcher实例</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">id</span> = uid1++</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//添加订阅</span></span><br><span class="line">            <span class="title function_">addSub</span>(<span class="params">sub</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">subs</span>.<span class="title function_">push</span>(sub)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//添加依赖//window全局位置</span></span><br><span class="line">            <span class="title function_">depend</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="title class_">Dep</span>.<span class="property">target</span>) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">addSub</span>(<span class="variable language_">window</span>.<span class="property">target</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//通知更新</span></span><br><span class="line">            <span class="title function_">notify</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">111</span>)</span><br><span class="line">                <span class="keyword">const</span> subs = <span class="variable language_">this</span>.<span class="property">subs</span>.<span class="title function_">slice</span>()</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = subs.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">                    suns[i].<span class="title function_">update</span>()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//观察模板</span></span><br><span class="line">        <span class="keyword">let</span> uid2 = <span class="number">0</span></span><br><span class="line">        <span class="keyword">class</span> <span class="title class_">Watcher</span> &#123;</span><br><span class="line">            <span class="title function_">constructor</span>(<span class="params">target, expression, callback</span>) &#123;<span class="comment">//监听对象//表达式//回调函数</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">id</span> = uid2++</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">target</span> = target</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">getter</span> = <span class="title function_">parsePath</span>(expression)</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">callback</span> = callback</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">value</span> = <span class="variable language_">this</span>.<span class="title function_">get</span>()</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_">update</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">run</span>()</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//进入依赖收集阶段</span></span><br><span class="line">            <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="title class_">Dep</span>.<span class="property">target</span> = <span class="variable language_">this</span></span><br><span class="line">                <span class="keyword">const</span> obj = <span class="variable language_">this</span>.<span class="property">target</span></span><br><span class="line">                <span class="keyword">let</span> value</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    value = <span class="variable language_">this</span>.<span class="title function_">getter</span>(obj)</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    <span class="title class_">Dep</span>.<span class="property">target</span> = <span class="literal">null</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> value</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//运作</span></span><br><span class="line">            <span class="title function_">run</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">getAndInvoke</span>(<span class="variable language_">this</span>.<span class="property">callback</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//刺激一下</span></span><br><span class="line">            <span class="title function_">getAndInvoke</span>(<span class="params">callback</span>) &#123;</span><br><span class="line">                <span class="keyword">const</span> value = <span class="variable language_">this</span>.<span class="title function_">get</span>()</span><br><span class="line">                <span class="keyword">if</span> (value !== <span class="variable language_">this</span>.<span class="property">value</span> || <span class="keyword">typeof</span> value === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">                    <span class="keyword">const</span> oldValue = <span class="variable language_">this</span>.<span class="property">value</span></span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">value</span> = value</span><br><span class="line">                    callback.<span class="title function_">call</span>(<span class="variable language_">this</span>.<span class="property">target</span>, value, oldValue)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//工具函数辨别点语法找到数据</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">parsePath</span>(<span class="params">str</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> segments = str.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="function"><span class="params">obj</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> segments) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (!obj) <span class="keyword">return</span></span><br><span class="line">                    obj = obj[i]</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> obj</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// console.log(parsePath(&#x27;a.c.d&#x27;)(&#123;a:&#123;c:&#123;d:1&#125;&#125;&#125;))</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> obj = &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="number">001</span>,</span><br><span class="line">            <span class="attr">identity</span>: &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;lilei&#x27;</span>,</span><br><span class="line">                <span class="attr">age</span>: <span class="number">17</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">grades</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">observe</span>(obj)</span><br><span class="line">        <span class="comment">// obj.grades.push(12)</span></span><br><span class="line">        <span class="comment">// console.log(obj.__ob__)</span></span><br><span class="line">        obj.<span class="property">id</span> = <span class="number">111</span></span><br><span class="line">        <span class="comment">// obj.identity.age=12</span></span><br><span class="line">        <span class="comment">// console.log(obj.identity.age)</span></span><br><span class="line">        <span class="comment">// obj.grades.push(4)</span></span><br><span class="line">        <span class="comment">// obj.grades.splice(2, 1, 5, 6)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// console.log(obj.grades)</span></span><br><span class="line">        <span class="comment">// obj.id=0</span></span><br></pre></td></tr></table></figure>



<hr>
<hr>
<h3 id="diff算法"><a href="#diff算法" class="headerlink" title="diff算法"></a>diff算法</h3><h4 id="diff算法-dom数据化"><a href="#diff算法-dom数据化" class="headerlink" title="diff算法(dom数据化)"></a>diff算法(dom数据化)</h4><p>Vue2递归+双指针  </p>
<ol>
<li>判断是不是同一元素,不是则替换.</li>
<li>是同一元素&gt;&gt;比对属性&gt;&gt;儿子节点(都有儿子节点则双指针遍历)</li>
</ol>
<p>Vue3最长递增子数列</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//模板解析语法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Vue</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$el</span> = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(options.<span class="property">el</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$data</span> = options.<span class="property">data</span><span class="comment">//将配置对象传到自身</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">compile</span>(<span class="variable language_">this</span>.<span class="property">$el</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">compile</span>(<span class="params">node</span>) &#123;</span><br><span class="line">        node.<span class="property">childNodes</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(item.<span class="property">nodeType</span>===<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">compile</span>(item)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(item.<span class="property">nodeType</span>===<span class="number">3</span>)&#123;</span><br><span class="line">                <span class="keyword">let</span> reg=<span class="regexp">/\&#123;\&#123;(.*?)\&#125;\&#125;/g</span></span><br><span class="line">                <span class="keyword">let</span> text=item.<span class="property">textContent</span></span><br><span class="line">                item.<span class="property">textContent</span>=text.<span class="title function_">replace</span>(reg,<span class="function">(<span class="params">match,vmKey</span>)=&gt;</span>&#123;</span><br><span class="line">                    vmKey=vmKey.<span class="title function_">trim</span>()</span><br><span class="line">                    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$data</span>[vmKey]</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<hr>
<h2 id="hash"><a href="#hash" class="headerlink" title="hash"></a>hash</h2><blockquote>
<p>可以改变URL，但不会触发页面重新加载（hash的改变会记录在window.hisotry中）因此并不算是一次http请求，所以这种模式不利于SEO优化<br>只能修改#后面的部分，因此只能跳转与当前URL同文档的URL<br>只能通过字符串改变URL<br>通过window.onhashchange监听hash的改变，借此实现无刷新跳转的功能。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> btn =<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#btn&#x27;</span>)</span><br><span class="line"><span class="comment">//点击改变</span></span><br><span class="line">btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    location.<span class="property">href</span>=<span class="string">&#x27;#/222&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//通过前进后退和地址栏改变</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onhashchange</span>=<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">oldURL</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">newURL</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(location.<span class="property">hash</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//dom加载完毕打印</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(location.<span class="property">hash</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="history"><a href="#history" class="headerlink" title="history"></a>history</h2><blockquote>
<p>新的URL可以是与当前URL同源的任意 URL，也可以与当前URL一样，但是这样会把重复的一次操作记录到栈中<br>通过参数stateObject可以添加任意类型的数据到记录中<br>可额外设置title属性供后续使用<br>通过pushState、replaceState实现无刷新跳转的功能(go)</p>
<p>缺点</p>
<p>当应用通过vue-router跳转到某个页面后，因为此时是前端路由控制页面跳转，虽然url改变，但是页面只是内容改变，并没有重新请求，所以这套流程没有任何问题。但是，如果在当前的页面刷新一下，此时会重新发起请求，如果nginx没有匹配到当前url，就会出现404的页面。那为什么hash模式不会出现这个问题呢?因为hash虽然可以改变URL，但不会被包括在HTTP请求中。它被用来指导浏览器动作，并不影响服务器端，因此，改变hash并没有改变url，所以页面路径还是之前的路径，nginx不会拦截。<br>因此，切记在使用history模式时，需要服务端允许地址可访问，否则就会出现404的尴尬场景。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#btn&#x27;</span>)</span><br><span class="line"><span class="comment">//点击改变</span></span><br><span class="line">btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> state = &#123; <span class="attr">name</span>: <span class="string">&#x27;user&#x27;</span> &#125;</span><br><span class="line">    history.<span class="title function_">pushState</span>(state, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;user&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//dom加载完毕打印</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;path:&#x27;</span>, <span class="string">&#x27;@@@&#x27;</span>, location.<span class="property">pathname</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//监听浏览器前进后退</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onpopstate</span> = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onpopstate&#x27;</span>, <span class="string">&#x27;@@@&#x27;</span>, e.<span class="property">state</span>, location.<span class="property">pathname</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/11/vue%E9%9D%A2%E8%AF%95%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="The-mediocre">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
      <meta itemprop="description" content="人们愿意相信一个土匪叫张麻子，而不愿意相信他叫张牧之">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BLOG">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/11/vue%E9%9D%A2%E8%AF%95%E9%A2%98/" class="post-title-link" itemprop="url">vue面试题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-04-11 12:58:01" itemprop="dateCreated datePublished" datetime="2022-04-11T12:58:01Z">2022-04-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-12 12:02:22" itemprop="dateModified" datetime="2022-06-12T12:02:22Z">2022-06-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">面试</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%9D%A2%E8%AF%95/vue%E6%80%BB%E7%BB%93%E7%9F%A5%E8%AF%86%E7%82%B9/" itemprop="url" rel="index"><span itemprop="name">vue总结知识点</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h5 id="初始化项目-vue-create"><a href="#初始化项目-vue-create" class="headerlink" title="初始化项目 vue create"></a>初始化项目 vue create</h5><h5 id="语法检测eslint关闭-lintOnSave-false"><a href="#语法检测eslint关闭-lintOnSave-false" class="headerlink" title="语法检测eslint关闭   lintOnSave: false,"></a>语法检测eslint关闭   lintOnSave: false,</h5><h5 id="监听属性的深度监听因为handle函数拿不到对象-引用类型-的oldvalue-立即监听-watch监听路由数据变化"><a href="#监听属性的深度监听因为handle函数拿不到对象-引用类型-的oldvalue-立即监听-watch监听路由数据变化" class="headerlink" title="监听属性的深度监听因为handle函数拿不到对象(引用类型)的oldvalue,立即监听    watch监听路由数据变化"></a>监听属性的深度监听因为handle函数拿不到对象(引用类型)的oldvalue,立即监听    watch监听路由数据变化</h5><p>computed和methods相比前者有缓存,后者无缓存</p>
<p>computed和watch相比计算一个,监控多个个时候比较麻烦</p>
<h6 id="v-if-不去渲染-一次性改变-v-show设置dispaly-none-x2F-block-频繁改变-会增加渲染"><a href="#v-if-不去渲染-一次性改变-v-show设置dispaly-none-x2F-block-频繁改变-会增加渲染" class="headerlink" title="v-if,不去渲染(一次性改变),v-show设置dispaly:none&#x2F;block(频繁改变),会增加渲染"></a>v-if,不去渲染(一次性改变),v-show设置dispaly:none&#x2F;block(频繁改变),会增加渲染</h6><h5 id="绑定样式类名-style-class对象数组形式"><a href="#绑定样式类名-style-class对象数组形式" class="headerlink" title="绑定样式类名 :style class对象数组形式"></a>绑定样式类名 :style class对象数组形式</h5><h5 id="v-for-遍历对象的时候拿到的值-value-key-index"><a href="#v-for-遍历对象的时候拿到的值-value-key-index" class="headerlink" title="v-for 遍历对象的时候拿到的值(value,key,index)"></a>v-for 遍历对象的时候拿到的值(value,key,index)</h5><p>不能和v-if连用,v-for优先级高,导致已经渲染出来了v-if判断又要删除掉,浪费性能,可以在v-for外面增加一层template将其设置为v-if,,,,,, 优先级源码判断if条件的时候once-&gt;for-&gt;if</p>
<h5 id="methods方法里面的e-e-target-原生事件-e-target-constructor-event-传多个参数"><a href="#methods方法里面的e-e-target-原生事件-e-target-constructor-event-传多个参数" class="headerlink" title="methods方法里面的e,e.target,原生事件,e.target.constructor,,,,$event(传多个参数)"></a>methods方法里面的e,e.target,原生事件,e.target.constructor,,,,$event(传多个参数)</h5><h5 id="组件传信props-emit-bus-mounted挂载-beforeDetroy解绑"><a href="#组件传信props-emit-bus-mounted挂载-beforeDetroy解绑" class="headerlink" title="组件传信props,$emit,$bus(mounted挂载,beforeDetroy解绑)"></a>组件传信props,$emit,$bus(mounted挂载,beforeDetroy解绑)</h5><h5 id="生命周期钩子-beforeUpdated先父后子update先子后父"><a href="#生命周期钩子-beforeUpdated先父后子update先子后父" class="headerlink" title="生命周期钩子,beforeUpdated先父后子update先子后父"></a>生命周期钩子,beforeUpdated先父后子update先子后父</h5><h5 id="nextTick-vue渲染方式是异步的-会在下一个tick渲染会导致慢一步-这个方法会在异步渲染完毕后执行-批量进行渲染-在轮播图组件-x2F-x2F-x2F-x2F-vue异步更新原因是减少频繁更新性能浪费-在本轮操作结束后再更新-x2F-x2F-x2F-nextTick-采用宏任务微任务即promise-settimeout-setInmediate回调"><a href="#nextTick-vue渲染方式是异步的-会在下一个tick渲染会导致慢一步-这个方法会在异步渲染完毕后执行-批量进行渲染-在轮播图组件-x2F-x2F-x2F-x2F-vue异步更新原因是减少频繁更新性能浪费-在本轮操作结束后再更新-x2F-x2F-x2F-nextTick-采用宏任务微任务即promise-settimeout-setInmediate回调" class="headerlink" title="$nextTick,vue渲染方式是异步的,会在下一个tick渲染会导致慢一步,,这个方法会在异步渲染完毕后执行(批量进行渲染),在轮播图组件&#x2F;&#x2F;&#x2F;&#x2F;vue异步更新原因是减少频繁更新性能浪费,在本轮操作结束后再更新&#x2F;&#x2F;&#x2F;nextTick 采用宏任务微任务即promise,settimeout,setInmediate回调"></a>$nextTick,vue渲染方式是异步的,会在下一个tick渲染会导致慢一步,,这个方法会在异步渲染完毕后执行(批量进行渲染),在轮播图组件&#x2F;&#x2F;&#x2F;&#x2F;vue异步更新原因是减少频繁更新性能浪费,在本轮操作结束后再更新&#x2F;&#x2F;&#x2F;nextTick 采用宏任务微任务即promise,settimeout,setInmediate回调</h5><p>原因:到这里，整体nextTick的代码都分析完毕了，总结一下它的流程就是：</p>
<p>把回调函数放入callbacks等待执行</p>
<p>将执行函数放到微任务或者宏任务中</p>
<p>事件循环到了微任务或者宏任务，执行函数依次执行callbacks中的回调</p>
<p>再回到我们开头说的setTimeout，可以看出来nextTick是对setTimeout进行了多种兼容性的处理，宽泛的也可以理解为将回调函数放入setTimeout中执行；不过nextTick优先放入微任务执行，而setTimeout是宏任务，因此nextTick一般情况下总是先于setTimeout执行，我们可以在浏览器中尝试一下：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/ych6666/article/details/112428797">相关链接</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$nextTick(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//函数体</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="插槽slot-x2F-作用域插槽-父组件引用子组件-在父组件的子组件填东西-子组件挖坑-可以设置默认内容-作用域插槽子中有数据给父亲传-父亲解构接受"><a href="#插槽slot-x2F-作用域插槽-父组件引用子组件-在父组件的子组件填东西-子组件挖坑-可以设置默认内容-作用域插槽子中有数据给父亲传-父亲解构接受" class="headerlink" title="插槽slot&#x2F;作用域插槽,父组件引用子组件,在父组件的子组件填东西,子组件挖坑(可以设置默认内容),,,,作用域插槽子中有数据给父亲传,父亲解构接受"></a>插槽slot&#x2F;作用域插槽,父组件引用子组件,在父组件的子组件填东西,子组件挖坑(可以设置默认内容),,,,作用域插槽子中有数据给父亲传,父亲解构接受</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父</span></span><br><span class="line">&lt;<span class="title class_">Child</span>&gt;</span><br><span class="line">         <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>=<span class="string">&quot;&#123;user&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              &#123;&#123;user.age&#125;&#125;</span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">    &lt;/<span class="title class_">Child</span>&gt;</span><br><span class="line"><span class="comment">//子</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">:user</span>=<span class="string">&#x27;user&#x27;</span>&gt;</span> &#123;&#123;user.name&#125;&#125;<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h5 id="动态渲染组件再父组件中设置"><a href="#动态渲染组件再父组件中设置" class="headerlink" title="动态渲染组件再父组件中设置"></a>动态渲染组件再父组件中设置</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;component :is=<span class="string">&quot;data&quot;</span>&gt;&lt;/component&gt;</span><br><span class="line"><span class="comment">//data最终结果要和组件名相同,则展示</span></span><br></pre></td></tr></table></figure>

<h5 id="异步组件-组件加上v-if-在页面开始挂载的时候将所有需要的东西下载了-即使v-if为false-即显示组件时不在重新发送网络请求-会导致首次加载影响性能-import语法"><a href="#异步组件-组件加上v-if-在页面开始挂载的时候将所有需要的东西下载了-即使v-if为false-即显示组件时不在重新发送网络请求-会导致首次加载影响性能-import语法" class="headerlink" title="异步组件, 组件加上v-if,在页面开始挂载的时候将所有需要的东西下载了,即使v-if为false,即显示组件时不在重新发送网络请求,,,, 会导致首次加载影响性能,import语法,"></a>异步组件, 组件加上v-if,在页面开始挂载的时候将所有需要的东西下载了,即使v-if为false,即显示组件时不在重新发送网络请求,,,, 会导致首次加载影响性能,import语法,</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">components</span>:&#123;</span><br><span class="line">    <span class="title class_">Child</span>:<span class="function">()=&gt;</span><span class="keyword">import</span> (<span class="string">&#x27;./components/Child&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//动态引入返回promise对象//路由懒加载,组件懒加载</span></span><br><span class="line"><span class="comment">//webpack会将懒加载的路由分块打包到一个单独的js中去，只有加载该路由的时候，才会加载这个chunk文件。</span></span><br></pre></td></tr></table></figure>

<h5 id="keep-alive-提升性能-组件来回切换加载一次后则不会销毁keep-alive-而尽量不要使用v-show因为一次性加载太多东西影响性能-组件简单可以使用-多两个钩子activated-deactivated"><a href="#keep-alive-提升性能-组件来回切换加载一次后则不会销毁keep-alive-而尽量不要使用v-show因为一次性加载太多东西影响性能-组件简单可以使用-多两个钩子activated-deactivated" class="headerlink" title="keep-alive,(提升性能),   组件来回切换加载一次后则不会销毁keep-alive,而尽量不要使用v-show因为一次性加载太多东西影响性能,组件简单可以使用,,,, 多两个钩子activated,deactivated"></a>keep-alive,(提升性能),   组件来回切换加载一次后则不会销毁keep-alive,而尽量不要使用v-show因为一次性加载太多东西影响性能,组件简单可以使用,,,, 多两个钩子activated,deactivated</h5><p>如果要在进入缓存的组件 发送数据需要在activated钩子中发送请求</p>
<h5 id="生命周期-create-mounte-updated-destroied-加入keep-alive包裹标签-多两个钩子activated-deactivated-每次离开都会执行"><a href="#生命周期-create-mounte-updated-destroied-加入keep-alive包裹标签-多两个钩子activated-deactivated-每次离开都会执行" class="headerlink" title="生命周期 create,mounte,updated,destroied,,,, 加入keep-alive包裹标签,多两个钩子activated,deactivated(每次离开都会执行)"></a>生命周期 create,mounte,updated,destroied,,,, 加入keep-alive包裹标签,多两个钩子activated,deactivated(每次离开都会执行)</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">beforeCreate<span class="comment">//啥也没有</span></span><br><span class="line">create<span class="comment">//data没有$el</span></span><br><span class="line">beforeMount<span class="comment">//data没有$el</span></span><br><span class="line">mounted<span class="comment">//都有</span></span><br></pre></td></tr></table></figure>



<h5 id="scoped样式独立-样式穿透某些属性需要让别的生效-sass-x2F-less-v-deep-x2F-子元素-css-gt-gt-gt"><a href="#scoped样式独立-样式穿透某些属性需要让别的生效-sass-x2F-less-v-deep-x2F-子元素-css-gt-gt-gt" class="headerlink" title="scoped样式独立,,,样式穿透某些属性需要让别的生效,sass&#x2F;less     ::v-deep&#x2F;子元素,,,,    css     &gt;&gt;&gt;"></a>scoped样式独立,,,样式穿透某些属性需要让别的生效,sass&#x2F;less     ::v-deep&#x2F;子元素,,,,    css     &gt;&gt;&gt;</h5><h5 id="props和data优先级谁高props-gt-methods-gt-data-gt-computed-gt-watch"><a href="#props和data优先级谁高props-gt-methods-gt-data-gt-computed-gt-watch" class="headerlink" title="props和data优先级谁高props-&gt;methods-&gt;data-&gt;computed-&gt;watch"></a>props和data优先级谁高props-&gt;methods-&gt;data-&gt;computed-&gt;watch</h5><hr>
<h4 id="vuex-状态管理-state-getters-mutations-同步操作-actions-异步操作-mapstate"><a href="#vuex-状态管理-state-getters-mutations-同步操作-actions-异步操作-mapstate" class="headerlink" title="vuex 状态管理(state,getters,mutations(同步操作),actions(异步操作))(mapstate)"></a>vuex 状态管理(state,getters,mutations(同步操作),actions(异步操作))(mapstate)</h4><p>单向数据流组件不能改变&#x2F;不是持久化存储(保存到cookie,localstorage)</p>
<h5 id="vue代理"><a href="#vue代理" class="headerlink" title="vue代理"></a>vue代理</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//跨域问题:vue.config.js文件中</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: <span class="string">&#x27;http://localhost:4000&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="vue打包后空白页问题-1-路径问题-publicPath-’-x2F-‘-2-路由模式-hash模式有-出现问题-后端重定向-3-跨域问题模式和环境变量"><a href="#vue打包后空白页问题-1-路径问题-publicPath-’-x2F-‘-2-路由模式-hash模式有-出现问题-后端重定向-3-跨域问题模式和环境变量" class="headerlink" title="vue打包后空白页问题   1. 路径问题 (publicPath:’.&#x2F;‘)2. 路由模式(hash模式有#出现问题)[后端重定向]  3. 跨域问题模式和环境变量"></a>vue打包后空白页问题   1. 路径问题 (publicPath:’.&#x2F;‘)2. 路由模式(hash模式有#出现问题)[后端重定向]  3. 跨域问题模式和环境变量</h5><h6 id="vue-router-模式history-hash-history会发送请求-hash不会-找不到页面的时候"><a href="#vue-router-模式history-hash-history会发送请求-hash不会-找不到页面的时候" class="headerlink" title="vue-router 模式history,hash#       history会发送请求,hash不会(找不到页面的时候)"></a>vue-router 模式history,hash#       history会发送请求,hash不会(找不到页面的时候)</h6><h5 id="SPA单页面应用-SEO优化不好-性能不好"><a href="#SPA单页面应用-SEO优化不好-性能不好" class="headerlink" title="SPA单页面应用:SEO优化不好,性能不好"></a>SPA单页面应用:SEO优化不好,性能不好</h5><p>vue路径传值:    会在路径上显示出来query</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 显式</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">query</span>:&#123;</span><br><span class="line">        <span class="attr">a</span>:<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//接this.route.query</span></span><br><span class="line"><span class="number">2.</span> 隐式</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>:&#123;</span><br><span class="line">        <span class="attr">a</span>:<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//接this.$route.params</span></span><br></pre></td></tr></table></figure>



<h5 id="路由导航守卫-全局-路由独享-组件内"><a href="#路由导航守卫-全局-路由独享-组件内" class="headerlink" title="路由导航守卫:  全局  路由独享  组件内"></a>路由导航守卫:  全局  路由独享  组件内</h5><p>全局路由守卫   </p>
<ol>
<li><p>全局守卫：前置守卫：beforeEach 后置钩子：afterEach</p>
</li>
<li><p>单个路由守卫：独享守卫：beforeEnter</p>
</li>
<li><p>组件内部守卫：beforeRouteEnter beforeRouteUpdate beforeRouteLeave</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// 在渲染该组件的对应路由被 confirm 前调用</span></span><br><span class="line">    <span class="comment">// 不！能！获取组件实例 `this`</span></span><br><span class="line">    <span class="comment">// 因为当守卫执行前，组件实例还没被创建</span></span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteUpdate (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// 在当前路由改变，但是该组件被复用时调用</span></span><br><span class="line">    <span class="comment">// 举例来说，对于一个带有动态参数的路径 /foo/:id，在 /foo/1 和 /foo/2 之间跳转的时候，</span></span><br><span class="line">    <span class="comment">// 由于会渲染同样的 Foo 组件，因此组件实例会被复用。而这个钩子就会在这个情况下被调用。</span></span><br><span class="line">    <span class="comment">// 可以访问组件实例 `this`</span></span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteLeave (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// 导航离开该组件的对应路由时调用</span></span><br><span class="line">    <span class="comment">// 可以访问组件实例 `this`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>路由独享守卫:beforeEnter</p>
<p>组件内守卫:beforeRouteEnter、beforeRouteUpdate、beforeRouteLeave</p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><h5 id="数据劫持"><a href="#数据劫持" class="headerlink" title="数据劫持"></a>数据劫持</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">proxyData</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> <span class="variable language_">this</span>.<span class="property">$data</span>)&#123;</span><br><span class="line">        <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">this</span>,key,&#123;</span><br><span class="line">            <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$data</span>[key]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="title function_">set</span>(<span class="params">val</span>)&#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">$data</span>[key]=val</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//在渲染的时候将元素存储到对象中</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> input=<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;input&#x27;</span>)</span><br><span class="line">        <span class="keyword">let</span> p=<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#p&#x27;</span>)<span class="comment">//展示内容</span></span><br><span class="line">        <span class="keyword">let</span> obj=&#123;&#125;</span><br><span class="line">        <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj,<span class="string">&#x27;name&#x27;</span>,&#123;</span><br><span class="line">            <span class="title function_">set</span>(<span class="params">val</span>)&#123;</span><br><span class="line">                p.<span class="property">innerHTML</span>=val</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        input.<span class="title function_">addEventListener</span>(<span class="string">&#x27;input&#x27;</span>,<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">            obj.<span class="property">name</span>=e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">  </span><br></pre></td></tr></table></figure>





<h5 id="视图更新"><a href="#视图更新" class="headerlink" title="视图更新"></a>视图更新</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Watch</span>&#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">vm,key,node,attr</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">vm</span>=vm<span class="comment">//对象</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">key</span>=key<span class="comment">//属性名</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">node</span>=node<span class="comment">//节点</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">att</span>=attr<span class="comment">//改变文本内容的字符串</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">update</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">node</span>[<span class="variable language_">this</span>.<span class="property">attr</span>]=<span class="variable language_">this</span>.<span class="property">vm</span>[<span class="variable language_">this</span>.<span class="property">key</span>]<span class="comment">//赋值</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="数据双向绑定"><a href="#数据双向绑定" class="headerlink" title="数据双向绑定"></a>数据双向绑定</h5><h5 id="Vue中key的作用"><a href="#Vue中key的作用" class="headerlink" title="Vue中key的作用"></a>Vue中key的作用</h5><p>可以在patch过程中判断新老加点是否相同,能否复用(不为index因为有时不在列表最后新增元素)</p>
<h5 id="proxy"><a href="#proxy" class="headerlink" title="proxy"></a>proxy</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//proxy</span></span><br><span class="line"><span class="keyword">const</span> p=<span class="keyword">new</span> <span class="title class_">Proxy</span>(target,handler)</span><br></pre></td></tr></table></figure>







<p>是Writable：决定是否可以修改属性的值；<br>另一个是Configurable：决定是否可以使用Object.defineProperty()来修改属性描述符，并且也会禁止删除这个属性；<br>当这两个描述符同时为false时，意味着这个属性完全是一个常量，Vue不能通过Object.defineProperty()来添加双向数据绑定。收集不了依赖，也就做不了双向数据绑定，就少添加很多watcher实例</p>
<h4 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h4><ol>
<li>编码优化</li>
</ol>
<ul>
<li>不要把太多的数据放入data中,发布订阅模式会收集多个watcher</li>
<li>v-for的时候使用事件代理</li>
<li>拆分组件复用</li>
<li>多用v-if,</li>
<li>路由懒加载</li>
</ul>
<ol start="2">
<li>加载优化</li>
</ol>
<ul>
<li>按需加载第三方模块</li>
<li>图片懒加载</li>
</ul>
<ol start="3">
<li>打包优化</li>
</ol>
<ul>
<li>cdn加载第三方模块(防止代码体积过大,防止服务器不稳定)</li>
</ul>
<h4 id="防止xss攻击"><a href="#防止xss攻击" class="headerlink" title="防止xss攻击"></a>防止xss攻击</h4><p>不使用v-html和innerhtml</p>
<p>解决方法: 可以使用lodash里面的escape方法对客户信息进行转译</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/25/webpack%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="The-mediocre">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
      <meta itemprop="description" content="人们愿意相信一个土匪叫张麻子，而不愿意相信他叫张牧之">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BLOG">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/25/webpack%E5%AD%A6%E4%B9%A0/" class="post-title-link" itemprop="url">webpack学习</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-04-25 19:44:47" itemprop="dateCreated datePublished" datetime="2022-04-25T19:44:47Z">2022-04-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-12 12:02:22" itemprop="dateModified" datetime="2022-06-12T12:02:22Z">2022-06-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/webpack%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">webpack学习</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>5.9k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>5 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h5 id="暴露语法"><a href="#暴露语法" class="headerlink" title="暴露语法"></a>暴露语法</h5><ol>
<li><h3 id="commonjs"><a href="#commonjs" class="headerlink" title="commonjs"></a>commonjs</h3></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> <span class="title function_">add</span> (a, b) &#123; <span class="keyword">return</span> a + b; &#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">		........</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">////////////////</span></span><br><span class="line"><span class="keyword">const</span> result = <span class="built_in">require</span>(<span class="string">&#x27;./test&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>es6模块化暴露</li>
</ol>
<ul>
<li>分别暴露</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 分别暴露//</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> a = <span class="number">10</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getData</span> = (<span class="params"></span>) =&gt; &#123; &#125;</span><br><span class="line"><span class="comment">// 对外暴露的实质是 &#123;a,getData&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 按需引入【逐个引入】</span></span><br><span class="line"><span class="keyword">import</span> &#123;a,getData&#125; <span class="keyword">from</span> <span class="string">&#x27;./test&#x27;</span></span><br><span class="line"><span class="comment">// 全部引入【统一引入】</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Dome</span> <span class="keyword">from</span> <span class="string">&#x27;./test&#x27;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//引入暴露</span></span><br><span class="line"><span class="keyword">export</span> &#123;a,getData&#125; <span class="keyword">from</span> <span class="string">&#x27;./test&#x27;</span> 【暴露的为多个单个数据，模块化不合适】</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">as</span> <span class="title class_">Dome</span> <span class="keyword">from</span> <span class="string">&#x27;./test&#x27;</span> 【暴露的为一个模块】</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对外暴露的实质是 ： &#123;Dome:&#123;a,getData&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<hr>
<ul>
<li>统一暴露</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">10</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getApp</span> = (<span class="params"></span>) =&gt; &#123; &#125;</span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">	a,</span><br><span class="line">    getApp</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 对外暴露的实质是 ： &#123;a,getApp&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 按需引入【逐个引入】</span></span><br><span class="line"><span class="keyword">import</span> &#123;a,getApp&#125; <span class="keyword">from</span> <span class="string">&#x27;./test&#x27;</span></span><br><span class="line"><span class="comment">// 全部引入【统一引入】</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Dome</span> <span class="keyword">from</span> <span class="string">&#x27;./test&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123;a,getAPP&#125; <span class="keyword">from</span> <span class="string">&#x27;./test&#x27;</span> 【暴露的为多个单个数据，模块化不合适】</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">as</span> <span class="title class_">Dome</span> <span class="keyword">from</span> <span class="string">&#x27;./test&#x27;</span> 【暴露的为一个模块，模块化常用】</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对外暴露的实质是： &#123;Dome:&#123;a,getApp&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>默认暴露</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">=========== 书写方法一 ==========</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">getBpp</span>(<span class="params"></span>)&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">a</span>:<span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line">========== 书写方法二 ==============</span><br><span class="line"><span class="keyword">const</span> a = <span class="number">10</span>,</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getBpp</span> = (<span class="params"></span>) =&gt; &#123;&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    a,</span><br><span class="line">    getBpp</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 对外暴露的实质是 ： &#123;default:&#123;a,getBpp&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 简写形式</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Dome</span> <span class="keyword">from</span> <span class="string">&#x27;./test&#x27;</span></span><br><span class="line"><span class="comment">// 完整形式</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> <span class="title class_">Dome</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;./test&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> <span class="title class_">Dome</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;./test&#x27;</span></span><br><span class="line"><span class="comment">// 暴露的实质是：&#123;Dome:&#123;a,getBpp&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>对外暴露出的都是一个对象，但是不同的暴露方法实际暴露的对象有所不同</li>
<li>默认并暴露的实质就是使用 export ➕ 去除import关键字后的引入写法</li>
<li>默认暴露在进行引入并暴露时不能进行简写</li>
<li>import引入的文件会自动收集在文件的最上方，并按照引入的顺序执行</li>
</ul>
<hr>
<hr>
<h2 id="webpack构建步骤-命令行"><a href="#webpack构建步骤-命令行" class="headerlink" title="webpack构建步骤(命令行)"></a>webpack构建步骤(命令行)</h2><ol>
<li>npm init -y</li>
<li>npm install webpack webpack-cli –save-dve</li>
<li>npx webpack –watch(自动更新)</li>
<li>npx webpack-dev-server(npx自身项目webpack)自动页面刷新,,,为输出物理文件,将打包的文件放在了内存里面</li>
<li>插件安装   npm install html-webpack-plugin -D</li>
<li>浏览器自动更新     npm install webpack-dev-server -D</li>
</ol>
<blockquote>
<p>npm代表下载包</p>
<p>npx是从node_nodules中的.bin中当作环境变量进行运行</p>
<p>npx webpack是从webpack文件中读取webpack.config.js,按照他打包</p>
</blockquote>
<p>开发模式:1. 编译代码;2. 规范代码</p>
<h3 id="基本目录"><a href="#基本目录" class="headerlink" title="基本目录"></a>基本目录</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 入口</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="comment">// 输出</span></span><br><span class="line">  <span class="attr">output</span>: &#123;&#125;,</span><br><span class="line">  <span class="comment">// 加载器</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 插件</span></span><br><span class="line">  <span class="attr">plugins</span>: [],</span><br><span class="line">  <span class="comment">// 模式</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="处理css资源"><a href="#处理css资源" class="headerlink" title="处理css资源"></a>处理css资源</h3><p>根据规则自下向上打包</p>
<p>先将css文件加载到common.js中再动态生成style标签</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm i css-loader style-loader -D</span><br><span class="line">npm i less-loader -D</span><br><span class="line">npm i sass-loader sass -D</span><br><span class="line">npm i stylus-loader -D</span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,<span class="comment">//检测开发文件</span></span><br><span class="line">    <span class="attr">use</span>: [</span><br><span class="line">        <span class="string">&quot;style-loader&quot;</span>,<span class="comment">//将js从CSS通过style标签添加到html文件</span></span><br><span class="line">        <span class="string">&quot;css-loader&quot;</span><span class="comment">//将CSS资源编译到commonjs的模块的js中</span></span><br><span class="line">    ],</span><br><span class="line">    </span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">    <span class="attr">use</span>: [</span><br><span class="line">        <span class="comment">// compiles Less to CSS</span></span><br><span class="line">        <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;less-loader&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">    <span class="attr">use</span>: [</span><br><span class="line">        <span class="comment">// 将 JS 字符串生成为 style 节点</span></span><br><span class="line">        <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">        <span class="comment">// 将 CSS 转化成 CommonJS 模块</span></span><br><span class="line">        <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">        <span class="comment">// 将 Sass 编译成 CSS</span></span><br><span class="line">        <span class="string">&#x27;sass-loader&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<h3 id="处理图片资源"><a href="#处理图片资源" class="headerlink" title="处理图片资源"></a>处理图片资源</h3><p>小图片转化为base64</p>
<p>因为图片资源会发送请求,转化为base64则是字符串,减少请求次数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.jpg/</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;asset&#x27;</span>,</span><br><span class="line">    <span class="attr">parser</span>: &#123;</span><br><span class="line">        <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">200</span> * <span class="number">1024</span> <span class="comment">// 小于10kb,减少发送请求次数(将他转化为了字符串)</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">generator</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;static/images/[hash:10][ext][query]&#x27;</span><span class="comment">//hash值生成唯一图片名称只取十位</span></span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="处理字体图标-音视频"><a href="#处理字体图标-音视频" class="headerlink" title="处理字体图标(音视频)"></a>处理字体图标(音视频)</h3><ol>
<li>阿里矢量图标库</li>
<li>添加购物车</li>
<li>创建文件</li>
<li>下载解压</li>
<li>打开index.html</li>
<li>复制class名称</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?|mp3|mp4|avi)$/</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;asset/resource&#x27;</span>,<span class="comment">//不被改变为base64</span></span><br><span class="line">    <span class="attr">generator</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;static/media/[hash:10][ext][query]&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="处理js资源eslint-bable"><a href="#处理js资源eslint-bable" class="headerlink" title="处理js资源eslint|bable"></a>处理js资源eslint|bable</h3><h5 id="eslint"><a href="#eslint" class="headerlink" title="eslint:"></a>eslint:</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//npm install eslint-webpack-plugin --save-dev</span><br><span class="line">//npm install eslint --save-dev</span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ESLintWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="comment">// 指定检查文件的根目录</span></span><br><span class="line">      <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;src&quot;</span>),</span><br><span class="line">    &#125;),</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//.eslintrc.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">// 继承 Eslint 规则</span></span><br><span class="line">    <span class="attr">extends</span>: [<span class="string">&quot;eslint:recommended&quot;</span>],</span><br><span class="line">    <span class="attr">env</span>: &#123;</span><br><span class="line">        <span class="attr">node</span>: <span class="literal">true</span>, <span class="comment">// 启用node中全局变量</span></span><br><span class="line">        <span class="attr">browser</span>: <span class="literal">true</span>, <span class="comment">// 启用浏览器中全局变量</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">        <span class="attr">ecmaVersion</span>: <span class="number">6</span>,</span><br><span class="line">        <span class="attr">sourceType</span>: <span class="string">&quot;module&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="string">&quot;no-var&quot;</span>: <span class="number">2</span>, <span class="comment">// 不能使用 var 定义变量</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>.eslintignore文件,写入”dist”该文件不会被插件检查</p>
</blockquote>
<p>babel</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D babel-loader @babel/core @babel/preset-env</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">    <span class="attr">exclude</span>: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">    <span class="attr">use</span>: &#123;</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">        <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">presets</span>: [<span class="string">&#x27;@babel/preset-env&#x27;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="处理html资源"><a href="#处理html资源" class="headerlink" title="处理html资源"></a>处理html资源</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev html-webpack-plugin</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">    <span class="comment">//找到模板</span></span><br><span class="line">    <span class="attr">template</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;public/index.html&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="自动化打包"><a href="#自动化打包" class="headerlink" title="自动化打包"></a>自动化打包</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack-dev-server -D</span><br><span class="line">npx webpack serve</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开发服务器</span></span><br><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">  <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>, <span class="comment">// 启动服务器域名</span></span><br><span class="line">  <span class="attr">port</span>: <span class="string">&quot;3000&quot;</span>, <span class="comment">// 启动服务器端口号</span></span><br><span class="line">  <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">// 是否自动打开浏览器</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<h3 id="开发模式与生产模式"><a href="#开发模式与生产模式" class="headerlink" title="开发模式与生产模式"></a>开发模式与生产模式</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span><span class="string">&quot;npm run dev&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span><span class="string">&quot;webpack serve --config ./config/webpack.dev.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span><span class="string">&quot;webpack --config ./config/webpack.prod.js&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>production</p>
<p>development</p>
</blockquote>
<h3 id="提取css文件-MiniCssExtractPlugin"><a href="#提取css文件-MiniCssExtractPlugin" class="headerlink" title="提取css文件(MiniCssExtractPlugin)"></a>提取css文件(MiniCssExtractPlugin)</h3><blockquote>
<p>传统方式是先将CSS引入到js文件中然后生成css标签,会有闪屏现象</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev mini-css-extract-plugin</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">filename</span>:<span class="string">&#x27;static/css/main.css&#x27;</span></span><br><span class="line">  &#125;)],</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/i</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h3 id="css兼容性处理"><a href="#css兼容性处理" class="headerlink" title="css兼容性处理"></a>css兼容性处理</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i postcss-loader postcss postcss-preset-env -D</span><br></pre></td></tr></table></figure>

<blockquote>
<p>配置写在css_loader下面,less_loader上面</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">  <span class="attr">options</span>: &#123;</span><br><span class="line">    <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">      <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// 能解决大多数样式兼容性问题</span></span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//pack.json文件</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// 其他省略</span></span><br><span class="line">  <span class="attr">&quot;browserslist&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;last 2 version&quot;</span><span class="punctuation">,</span> <span class="string">&quot;&gt; 1%&quot;</span><span class="punctuation">,</span> <span class="string">&quot;not dead&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>



<h3 id="合并配置"><a href="#合并配置" class="headerlink" title="合并配置"></a>合并配置</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//CSS兼容性处理的时候可以写出函数复用</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getStyleLoader</span>(<span class="params">pre</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">        <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,<span class="comment">//提取CSS为单独文件</span></span><br><span class="line">        <span class="string">&quot;css-loader&quot;</span>,<span class="comment">//将CSS资源编译到commonjs的模块的js中</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">                <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">                    <span class="attr">plugins</span>: [</span><br><span class="line">                        <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// 能解决大多数样式兼容性问题</span></span><br><span class="line">                    ],</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        pre</span><br><span class="line">    ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="CSS压缩"><a href="#CSS压缩" class="headerlink" title="CSS压缩"></a>CSS压缩</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install css-minimizer-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">CssMinimizerPlugin</span>(),</span><br></pre></td></tr></table></figure>
































































































































































































































      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/03/%E5%89%8D%E7%AB%AF%E5%85%AB%E8%82%A1%E6%96%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="The-mediocre">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
      <meta itemprop="description" content="人们愿意相信一个土匪叫张麻子，而不愿意相信他叫张牧之">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BLOG">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/03/%E5%89%8D%E7%AB%AF%E5%85%AB%E8%82%A1%E6%96%87/" class="post-title-link" itemprop="url">前端面试</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-04-03 19:43:48" itemprop="dateCreated datePublished" datetime="2022-04-03T19:43:48Z">2022-04-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-12 12:02:22" itemprop="dateModified" datetime="2022-06-12T12:02:22Z">2022-06-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">面试</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>523</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h6 id="同源策略"><a href="#同源策略" class="headerlink" title="同源策略"></a>同源策略</h6><p>协议+端口+域名</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Jsonp</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">req</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">url</span> = req.<span class="property">url</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">callbackName</span> = req.<span class="property">callbackName</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">create</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> url = <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.url&#125;</span>?callback=<span class="subst">$&#123;<span class="variable language_">this</span>.callbackName&#125;</span>`</span>;</span><br><span class="line">    script.<span class="property">src</span> = url;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;head&quot;</span>)[<span class="number">0</span>].<span class="title function_">appendChild</span>(script);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>cors方法解决</p>
<ol>
<li>设置请求响应头orgin和添加access-control-allow-orgin   * </li>
<li>有cookie时请求头:withCredentials: true:  服务端设置Access-Control-Allow-Credentials: true;;;;access-control-allow-orgin   不能为星号</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/03/%E5%8E%9F%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="The-mediocre">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
      <meta itemprop="description" content="人们愿意相信一个土匪叫张麻子，而不愿意相信他叫张牧之">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BLOG">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/03/%E5%8E%9F%E5%9E%8B/" class="post-title-link" itemprop="url">原型</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-04-03 20:37:53" itemprop="dateCreated datePublished" datetime="2022-04-03T20:37:53Z">2022-04-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-12 12:02:22" itemprop="dateModified" datetime="2022-06-12T12:02:22Z">2022-06-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">面试</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%9D%A2%E8%AF%95/%E6%89%8B%E5%86%99/" itemprop="url" rel="index"><span itemprop="name">手写</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h6 id="class方法使用"><a href="#class方法使用" class="headerlink" title="class方法使用"></a>class方法使用</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">            <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我是<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h6 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Students</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">            <span class="title function_">constructor</span>(<span class="params">name, score</span>) &#123;</span><br><span class="line">                <span class="variable language_">super</span>(name)</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">score</span> = score</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_">write</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">score</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h6 id="Object-create（x）"><a href="#Object-create（x）" class="headerlink" title="Object.create（x）"></a>Object.create（x）</h6><blockquote>
<p>创建一个新对象，使用现有对象x作为新创建对象的原型。</p>
</blockquote>
<h6 id="new-的过程"><a href="#new-的过程" class="headerlink" title="new 的过程"></a>new 的过程</h6><blockquote>
<p>在《JavaScript模式》这本书中，new的过程说的比较直白，当我们new一个构造器，主要有三步：</p>
<ul>
<li><p>创建一个空对象，将它的引用赋给 this，继承函数的原型。</p>
</li>
<li><p>通过 this 将属性和方法添加至这个对象</p>
</li>
<li><p>判断返回值类型是否是引用类型</p>
</li>
</ul>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES5构造函数</span></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">Parent</span> = <span class="keyword">function</span> (<span class="params">name, age</span>) &#123;</span><br><span class="line">    <span class="comment">//1.创建一个新对象，赋予this，这一步是隐性的，</span></span><br><span class="line">    <span class="comment">// let this = &#123;&#125;;</span></span><br><span class="line">    <span class="comment">//2.给this指向的对象赋予构造属性</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    <span class="comment">//3.如果没有手动返回对象，则默认返回this指向的这个对象，也是隐性的</span></span><br><span class="line">    <span class="comment">// return this;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> child = <span class="keyword">new</span> <span class="title class_">Parent</span>();</span><br></pre></td></tr></table></figure>

<h6 id="手写-空对象指向构造函数原型-this指向-返回值判断"><a href="#手写-空对象指向构造函数原型-this指向-返回值判断" class="headerlink" title="手写(空对象指向构造函数原型  this指向  返回值判断)"></a>手写(空对象指向构造函数原型  this指向  返回值判断)</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myNew = <span class="keyword">function</span> (<span class="params">fn, ...rest</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> obj = <span class="title class_">Object</span>.<span class="title function_">create</span>(fn.<span class="property"><span class="keyword">prototype</span></span>)<span class="comment">//指定原型</span></span><br><span class="line">            <span class="keyword">let</span> result = fn.<span class="title function_">apply</span>(obj, rest)<span class="comment">//this</span></span><br><span class="line">            <span class="keyword">return</span> result <span class="keyword">instanceof</span> <span class="title class_">Object</span> ? result : obj<span class="comment">//判断传进来的函数有没有返回值</span></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h5 id="创建对象的方式"><a href="#创建对象的方式" class="headerlink" title="创建对象的方式"></a>创建对象的方式</h5><h6 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createPerson</span>(<span class="params">name,age</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> obj =<span class="keyword">new</span> <span class="title class_">Object</span>()</span><br><span class="line">    obj.<span class="property">name</span>=name</span><br><span class="line">    obj.<span class="property">age</span>=age</span><br><span class="line">    obj.<span class="property">say</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">name</span>,obj.<span class="property">age</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name,age</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span>=name</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span>=age</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">say</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>,<span class="variable language_">this</span>.<span class="property">age</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="构造函数加原型"><a href="#构造函数加原型" class="headerlink" title="构造函数加原型"></a>构造函数加原型</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name,age</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span>=name</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span>=age</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">say</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="继承的模式"><a href="#继承的模式" class="headerlink" title="继承的模式"></a>继承的模式</h5><h6 id="原型链继承-子构造函数原型为父子实例"><a href="#原型链继承-子构造函数原型为父子实例" class="headerlink" title="原型链继承  (子构造函数原型为父子实例)"></a>原型链继承  (子构造函数原型为父子实例)</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;parent&#x27;</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">play</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">type</span> = <span class="string">&#x27;child&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Parent</span>();        <span class="comment">//此处导致</span></span><br><span class="line">        <span class="keyword">let</span> child1 = <span class="keyword">new</span> <span class="title class_">Child</span></span><br><span class="line">        <span class="keyword">let</span> child2 = <span class="keyword">new</span> <span class="title class_">Child</span></span><br><span class="line">        <span class="keyword">let</span> res = child1.<span class="property">__proto__</span> == child2.<span class="property">__proto__</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line"><span class="comment">//两个实例用的是同一个原型对象</span></span><br></pre></td></tr></table></figure>

<h6 id="构造函数继承-call方法-换属性"><a href="#构造函数继承-call方法-换属性" class="headerlink" title="构造函数继承   (call方法,换属性)"></a>构造函数继承   (call方法,换属性)</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Parent1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;parent1&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Parent1</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Parent1</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">type</span> = <span class="string">&#x27;child1&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> child = <span class="keyword">new</span> <span class="title class_">Child1</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(child);  <span class="comment">// 没问题</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(child.<span class="title function_">getName</span>());  <span class="comment">// 会报错</span></span><br><span class="line"><span class="comment">//父类原型对象中一旦存在父类之前自己定义的方法，那么子类将无法继承这些方法</span></span><br></pre></td></tr></table></figure>

<h6 id="组合继承"><a href="#组合继承" class="headerlink" title="组合继承"></a>组合继承</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">function</span> <span class="title function_">Parent3</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;parent3&#x27;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">play</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="title class_">Parent3</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">Child3</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 第二次调用 Parent3()</span></span><br><span class="line">    <span class="title class_">Parent3</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">type</span> = <span class="string">&#x27;child3&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// 第一次调用 Parent3()</span></span><br><span class="line">  <span class="title class_">Child3</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Parent3</span>();</span><br><span class="line">  <span class="comment">// 手动挂上构造器，指向自己的构造函数</span></span><br><span class="line">  <span class="title class_">Child3</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Child3</span>;</span><br><span class="line">  <span class="keyword">var</span> s3 = <span class="keyword">new</span> <span class="title class_">Child3</span>();</span><br><span class="line">  <span class="keyword">var</span> s4 = <span class="keyword">new</span> <span class="title class_">Child3</span>();</span><br><span class="line">  s3.<span class="property">play</span>.<span class="title function_">push</span>(<span class="number">4</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(s3.<span class="property">play</span>, s4.<span class="property">play</span>);  <span class="comment">// 不互相影响</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(s3.<span class="title function_">getName</span>()); <span class="comment">// 正常输出&#x27;parent3&#x27;</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(s4.<span class="title function_">getName</span>()); <span class="comment">// 正常输出&#x27;parent3&#x27;</span></span><br><span class="line"><span class="comment">///通过注释我们可以看到 Parent3 执行了两次，第一次是改变Child3 的 prototype 的时候，第二次是通过 call 方法调用 Parent3 的时候，那么 Parent3 多构造一次就多进行了一次性能开销</span></span><br></pre></td></tr></table></figure>

<h6 id="原型式继承"><a href="#原型式继承" class="headerlink" title="原型式继承"></a>原型式继承</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">let</span> parent4 = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;parent4&quot;</span>,</span><br><span class="line">    <span class="attr">friends</span>: [<span class="string">&quot;p1&quot;</span>, <span class="string">&quot;p2&quot;</span>, <span class="string">&quot;p3&quot;</span>],</span><br><span class="line">    <span class="attr">getName</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">let</span> person4 = <span class="title class_">Object</span>.<span class="title function_">create</span>(parent4);</span><br><span class="line">  person4.<span class="property">name</span> = <span class="string">&quot;tom&quot;</span>;</span><br><span class="line">  person4.<span class="property">friends</span>.<span class="title function_">push</span>(<span class="string">&quot;jerry&quot;</span>);</span><br><span class="line">  <span class="keyword">let</span> person5 = <span class="title class_">Object</span>.<span class="title function_">create</span>(parent4);</span><br><span class="line">  person5.<span class="property">friends</span>.<span class="title function_">push</span>(<span class="string">&quot;lucy&quot;</span>);</span><br><span class="line"> </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(person4.<span class="property">name</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(person4.<span class="property">name</span> === person4.<span class="title function_">getName</span>());</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(person5.<span class="property">name</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(person4.<span class="property">friends</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(person5.<span class="property">friends</span>);</span><br><span class="line"><span class="comment">///那么关于这种继承方式的缺点也很明显，多个实例的引用类型属性指向相同的内存，存在篡改的可能，接下来我们看一下在这个继承基础上进行优化之后的另一种继承方式——寄生式继承。</span></span><br></pre></td></tr></table></figure>

<h6 id="寄生式继承"><a href="#寄生式继承" class="headerlink" title="寄生式继承"></a>寄生式继承</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">let</span> parent5 = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;parent5&quot;</span>,</span><br><span class="line">  <span class="attr">friends</span>: [<span class="string">&quot;p1&quot;</span>, <span class="string">&quot;p2&quot;</span>, <span class="string">&quot;p3&quot;</span>],</span><br><span class="line">  <span class="attr">getName</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">clone</span>(<span class="params">original</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> clone = <span class="title class_">Object</span>.<span class="title function_">create</span>(original);</span><br><span class="line">  clone.<span class="property">getFriends</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">friends</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> clone;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> person5 = <span class="title function_">clone</span>(parent5);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person5.<span class="title function_">getName</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person5.<span class="title function_">getFriends</span>());</span><br></pre></td></tr></table></figure>

<h6 id="寄生组合"><a href="#寄生组合" class="headerlink" title="寄生组合"></a>寄生组合</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">clone</span> (parent, child) &#123;</span><br><span class="line">  <span class="comment">// 这里改用 Object.create 就可以减少组合继承中多进行一次构造的过程</span></span><br><span class="line">  child.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(parent.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line">  child.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = child;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent6</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;parent6&#x27;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">play</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">&#125;</span><br><span class="line"> <span class="title class_">Parent6</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child6</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Parent6</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">friends</span> = <span class="string">&#x27;child5&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="title function_">clone</span>(<span class="title class_">Parent6</span>, <span class="title class_">Child6</span>);</span><br><span class="line"> </span><br><span class="line"><span class="title class_">Child6</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getFriends</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">friends</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> person6 = <span class="keyword">new</span> <span class="title class_">Child6</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person6);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person6.<span class="title function_">getName</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person6.<span class="title function_">getFriends</span>());</span><br></pre></td></tr></table></figure>



<ol>
<li>原型链继承:简单的prototype&#x3D;实例</li>
<li>构造函数继承:借用方法</li>
<li>组合继承: 1+2(更改constructor)</li>
<li>原型式继承:儿子&#x3D; Object.create(fn.protorype</li>
<li>寄生式继承: 寄生函数,实例&#x3D;Object.create(父.prototype)</li>
<li>寄生组合式继承:5+3</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/05/eventloop/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="The-mediocre">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
      <meta itemprop="description" content="人们愿意相信一个土匪叫张麻子，而不愿意相信他叫张牧之">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BLOG">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/05/eventloop/" class="post-title-link" itemprop="url">异步</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-04-05 14:11:18" itemprop="dateCreated datePublished" datetime="2022-04-05T14:11:18Z">2022-04-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-12 12:02:22" itemprop="dateModified" datetime="2022-06-12T12:02:22Z">2022-06-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">面试</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%9D%A2%E8%AF%95/%E6%89%8B%E5%86%99/" itemprop="url" rel="index"><span itemprop="name">手写</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>7.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>7 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h5 id="调用栈-消息队列-微任务队列-宏任务-微任务"><a href="#调用栈-消息队列-微任务队列-宏任务-微任务" class="headerlink" title="调用栈  消息队列  微任务队列  宏任务  微任务"></a>调用栈  消息队列  微任务队列  宏任务  微任务</h5><blockquote>
<p>宏任务—-&gt;微任务—-&gt;渲染(alert阻塞)—-&gt;宏任务</p>
</blockquote>
<ol>
<li>单线程:防止多线程同时操作dom,排队</li>
<li>异步:防止代码堵塞,eventloop</li>
</ol>
<h5 id="promise手写要素-特点"><a href="#promise手写要素-特点" class="headerlink" title="promise手写要素(特点)"></a>promise手写要素(特点)</h5><ol>
<li>resolve&#x3D;&gt;fulfilled, reject&#x3D;&gt;rejected</li>
<li>只能一次改变, throw&#x3D;&#x3D;&#x3D;reject</li>
<li>resolve,reject函数绑定this</li>
<li>then方法传入参数是否是函数</li>
<li>定时器导致的pending状态callback属性保存</li>
<li>then方法返回promise,状态由 then方法返回结果决定,</li>
<li>用定时器模拟微任务状态</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//声明构造函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Promise</span>(<span class="params">executor</span>)&#123;</span><br><span class="line">    <span class="comment">//添加属性</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">PromiseState</span> = <span class="string">&#x27;pending&#x27;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">PromiseResult</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">//声明属性</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">callbacks</span> = [];</span><br><span class="line">    <span class="comment">//保存实例对象的 this 的值</span></span><br><span class="line">    <span class="keyword">const</span> self = <span class="variable language_">this</span>;<span class="comment">// self _this that</span></span><br><span class="line">    <span class="comment">//resolve 函数</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">resolve</span>(<span class="params">data</span>)&#123;</span><br><span class="line">        <span class="comment">//判断状态</span></span><br><span class="line">        <span class="keyword">if</span>(self.<span class="property">PromiseState</span> !== <span class="string">&#x27;pending&#x27;</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="comment">//1. 修改对象的状态 (promiseState)</span></span><br><span class="line">        self.<span class="property">PromiseState</span> = <span class="string">&#x27;fulfilled&#x27;</span>;<span class="comment">// resolved</span></span><br><span class="line">        <span class="comment">//2. 设置对象结果值 (promiseResult)</span></span><br><span class="line">        self.<span class="property">PromiseResult</span> = data;</span><br><span class="line">        <span class="comment">//调用成功的回调函数</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            self.<span class="property">callbacks</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                item.<span class="title function_">onResolved</span>(data);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//reject 函数</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">reject</span>(<span class="params">data</span>)&#123;</span><br><span class="line">        <span class="comment">//判断状态</span></span><br><span class="line">        <span class="keyword">if</span>(self.<span class="property">PromiseState</span> !== <span class="string">&#x27;pending&#x27;</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="comment">//1. 修改对象的状态 (promiseState)</span></span><br><span class="line">        self.<span class="property">PromiseState</span> = <span class="string">&#x27;rejected&#x27;</span>;<span class="comment">// </span></span><br><span class="line">        <span class="comment">//2. 设置对象结果值 (promiseResult)</span></span><br><span class="line">        self.<span class="property">PromiseResult</span> = data;</span><br><span class="line">        <span class="comment">//执行失败的回调</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            self.<span class="property">callbacks</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                item.<span class="title function_">onRejected</span>(data);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="comment">//同步调用『执行器函数』</span></span><br><span class="line">        <span class="title function_">executor</span>(resolve, reject);</span><br><span class="line">    &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">        <span class="comment">//修改 promise 对象状态为『失败』</span></span><br><span class="line">        <span class="title function_">reject</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加 then 方法</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">then</span> = <span class="keyword">function</span>(<span class="params">onResolved, onRejected</span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> self = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="comment">//判断回调函数参数</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> onRejected !== <span class="string">&#x27;function&#x27;</span>)&#123;</span><br><span class="line">        onRejected = <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> reason;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> onResolved !== <span class="string">&#x27;function&#x27;</span>)&#123;</span><br><span class="line">        onResolved = <span class="function"><span class="params">value</span> =&gt;</span> value;</span><br><span class="line">        <span class="comment">//value =&gt; &#123; return value&#125;;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//封装函数</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">callback</span>(<span class="params">type</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//获取回调函数的执行结果</span></span><br><span class="line">                <span class="keyword">let</span> result = <span class="title function_">type</span>(self.<span class="property">PromiseResult</span>);</span><br><span class="line">                <span class="comment">//判断</span></span><br><span class="line">                <span class="keyword">if</span>(result <span class="keyword">instanceof</span> <span class="title class_">Promise</span>)&#123;</span><br><span class="line">                    <span class="comment">//如果是 Promise 类型的对象</span></span><br><span class="line">                    result.<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">resolve</span>(v);</span><br><span class="line">                    &#125;, <span class="function"><span class="params">r</span>=&gt;</span>&#123;</span><br><span class="line">                        <span class="title function_">reject</span>(r);</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="comment">//结果的对象状态为『成功』</span></span><br><span class="line">                    <span class="title function_">resolve</span>(result);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">                <span class="title function_">reject</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//调用回调函数  PromiseState</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">PromiseState</span> === <span class="string">&#x27;fulfilled&#x27;</span>)&#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">callback</span>(onResolved);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">PromiseState</span> === <span class="string">&#x27;rejected&#x27;</span>)&#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">callback</span>(onRejected);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//判断 pending 状态</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">PromiseState</span> === <span class="string">&#x27;pending&#x27;</span>)&#123;</span><br><span class="line">            <span class="comment">//保存回调函数</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">callbacks</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">                <span class="attr">onResolved</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">                    <span class="title function_">callback</span>(onResolved);</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">onRejected</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">                    <span class="title function_">callback</span>(onRejected);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//添加 catch 方法</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">catch</span> = <span class="keyword">function</span>(<span class="params">onRejected</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">then</span>(<span class="literal">undefined</span>, onRejected);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加 resolve 方法</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">resolve</span> = <span class="keyword">function</span>(<span class="params">value</span>)&#123;</span><br><span class="line">    <span class="comment">//返回promise对象</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(value <span class="keyword">instanceof</span> <span class="title class_">Promise</span>)&#123;</span><br><span class="line">            value.<span class="title function_">then</span>(<span class="function"><span class="params">v</span>=&gt;</span>&#123;</span><br><span class="line">                <span class="title function_">resolve</span>(v);</span><br><span class="line">            &#125;, <span class="function"><span class="params">r</span>=&gt;</span>&#123;</span><br><span class="line">                <span class="title function_">reject</span>(r);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//状态设置为成功</span></span><br><span class="line">            <span class="title function_">resolve</span>(value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加 reject 方法</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">reject</span> = <span class="keyword">function</span>(<span class="params">reason</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="title function_">reject</span>(reason);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加 all 方法</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">all</span> = <span class="keyword">function</span>(<span class="params">promises</span>)&#123;</span><br><span class="line">    <span class="comment">//返回结果为promise对象</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//声明变量</span></span><br><span class="line">        <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> arr = [];</span><br><span class="line">        <span class="comment">//遍历</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;promises.<span class="property">length</span>;i++)&#123;</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            promises[i].<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">//得知对象的状态是成功</span></span><br><span class="line">                <span class="comment">//每个promise对象 都成功</span></span><br><span class="line">                count++;</span><br><span class="line">                <span class="comment">//将当前promise对象成功的结果 存入到数组中</span></span><br><span class="line">                arr[i] = v;</span><br><span class="line">                <span class="comment">//判断</span></span><br><span class="line">                <span class="keyword">if</span>(count === promises.<span class="property">length</span>)&#123;</span><br><span class="line">                    <span class="comment">//修改状态</span></span><br><span class="line">                    <span class="title function_">resolve</span>(arr);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">reject</span>(r);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加 race 方法</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">race</span> = <span class="keyword">function</span>(<span class="params">promises</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;promises.<span class="property">length</span>;i++)&#123;</span><br><span class="line">            promises[i].<span class="title function_">then</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">//修改返回对象的状态为 『成功』</span></span><br><span class="line">                <span class="title function_">resolve</span>(v);</span><br><span class="line">            &#125;,<span class="function"><span class="params">r</span>=&gt;</span>&#123;</span><br><span class="line">                <span class="comment">//修改返回对象的状态为 『失败』</span></span><br><span class="line">                <span class="title function_">reject</span>(r);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr>
<ol>
<li>catch方法调用then方法只传入onrejected方法</li>
<li>resolve自身属性返回promise状态由传入状态决定</li>
<li>reject返回失败promise</li>
<li>all方法数组,count++时候等于length</li>
<li>race直接then方法,无参数是成功的promise</li>
</ol>
<h6 id="async-await"><a href="#async-await" class="headerlink" title="async,,await"></a>async,,await</h6><ol>
<li>await后面如过不接promise可能会不按照顺序,结果按照执行快慢</li>
<li>await 后面接promise且没有返回值,则后面的代码不会执行</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">wait</span>(<span class="params">num</span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(num * <span class="number">2</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">wait</span>(<span class="number">11</span>)</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">wait</span>(<span class="number">22</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>()</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>async函数返回结果看函数return结果决定</li>
<li>await可以用try catch包裹</li>
</ol>
<h6 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span><span class="comment">//yield+函数执行函数,并且函数返回值做value||接promise,value为pending状态的promiseA,调用then方法</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// console.dir(gen);//generator//产生器//suspended//暂停</span></span><br><span class="line"><span class="keyword">const</span> g = <span class="title function_">gen</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(g.<span class="title function_">next</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(g.<span class="title function_">next</span>());<span class="comment">//走完了next方法返回值</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(g.<span class="title function_">next</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(g.<span class="title function_">next</span>());</span><br><span class="line"><span class="comment">// &#123; value: 1, done: false &#125;</span></span><br><span class="line"><span class="comment">// &#123; value: 2, done: true &#125;是否有return</span></span><br><span class="line"><span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br><span class="line"><span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>

<p>next传值被yield接收 ,第二个开始传</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> res1 = <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res1);</span><br><span class="line">    <span class="keyword">const</span> res2 = <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res2);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> g = <span class="title function_">gen</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(g.<span class="title function_">next</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(g.<span class="title function_">next</span>(<span class="number">111</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(g.<span class="title function_">next</span>(<span class="number">222</span>));</span><br><span class="line"><span class="comment">// &#123; value: 1, done: false &#125;</span></span><br><span class="line"><span class="comment">// 111</span></span><br><span class="line"><span class="comment">// &#123; value: 2, done: false &#125;</span></span><br><span class="line"><span class="comment">// 222</span></span><br><span class="line"><span class="comment">// &#123; value: 3, done: true &#125;</span></span><br></pre></td></tr></table></figure>

<h6 id="防抖-停止动作后（时间点）-自定义时间（延迟）-x3D-gt-触发事件-多变一-形成闭包"><a href="#防抖-停止动作后（时间点）-自定义时间（延迟）-x3D-gt-触发事件-多变一-形成闭包" class="headerlink" title="防抖:停止动作后（时间点）+ 自定义时间（延迟）&#x3D;&gt; 触发事件  || 多变一   (形成闭包)"></a>防抖:停止动作后（时间点）+ 自定义时间（延迟）&#x3D;&gt; 触发事件  || 多变一   (形成闭包)</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">                    <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">                &#125;</span><br><span class="line">                timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>,<span class="variable language_">arguments</span>)</span><br><span class="line">                    timer=<span class="literal">null</span></span><br><span class="line">                &#125;, delay);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p>节流:多次操作变成少量操作(timer为true  异步队列)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> timer = <span class="literal">true</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">                    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                        fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>,<span class="variable language_">arguments</span>)</span><br><span class="line">                        timer = <span class="literal">true</span></span><br><span class="line">                    &#125;, delay);</span><br><span class="line">                &#125;</span><br><span class="line">                timer = <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h6 id="定时器误差"><a href="#定时器误差" class="headerlink" title="定时器误差"></a>定时器误差</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> i=<span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span>(i++&gt;<span class="number">1000000</span>)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> delay = <span class="number">1000</span></span><br><span class="line"><span class="keyword">let</span> offset=<span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> nextTime=delay-offset</span><br><span class="line"><span class="keyword">let</span> timer = <span class="built_in">setTimeout</span>(fn, nextTime)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    count++</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Date</span>.<span class="title function_">now</span>() - (now + count * delay));</span><br><span class="line">    offset=<span class="title class_">Date</span>.<span class="title function_">now</span>() - (now + count * delay)</span><br><span class="line">    nextTime=delay-offset</span><br><span class="line">    <span class="keyword">if</span> (nextTime &lt; <span class="number">0</span>) &#123; nextTime = <span class="number">0</span>; &#125;</span><br><span class="line">    <span class="keyword">if</span> (count &lt; <span class="number">10</span>) &#123;</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(fn, nextTime);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<p>settimeout: 误差HTML5规范规定最小延迟时间不能小于4ms，即x如果小于4，会被当做4来处理。 不过不同浏览器的实现不一样，比如，Chrome可以设置1ms，IE11&#x2F;Edge是4ms</p>
<h4 id="promise并发"><a href="#promise并发" class="headerlink" title="promise并发"></a>promise并发</h4><h6 id="啥也不用"><a href="#啥也不用" class="headerlink" title="啥也不用"></a>啥也不用</h6><blockquote>
<p>while循环负责开始时填满并发池,入口触发addTask函数;;  request负责处理请求并且返回是否处理成功;;;  addTask函数触发request处理请求,并且往pool里面添加task任务状态,通过task成功状态,先将pool中的当前请求删除,将任务队列弹出,对弹出的判断是否不断往里面添加请求,</p>
<p>while—&gt;addTask—-&gt;request—&gt;addTask—-&gt;task.then—-&gt;删掉当前task—-&gt;判断是否接着加task</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">request</span>(<span class="params">url</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(<span class="string">`任务<span class="subst">$&#123;url&#125;</span>完成`</span>)</span><br><span class="line">                &#125;, <span class="number">1000</span>);</span><br><span class="line">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(res)<span class="comment">//业务逻辑</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//添加任务</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">addTask</span>(<span class="params">url</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> task = <span class="title function_">request</span>(url)</span><br><span class="line">            pool.<span class="title function_">push</span>(task)<span class="comment">//填入</span></span><br><span class="line">            task.<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                pool.<span class="title function_">splice</span>(pool.<span class="title function_">indexOf</span>(task), <span class="number">1</span>)</span><br><span class="line">                <span class="comment">// console.log(`$&#123;url&#125;结束;;当前并发数$&#123;pool.length&#125;`)</span></span><br><span class="line">                url = urls.<span class="title function_">shift</span>()</span><br><span class="line">                <span class="keyword">if</span> (url !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">                    <span class="title function_">addTask</span>(url)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> urls = [<span class="string">&#x27;00000&#x27;</span>, <span class="string">&#x27;11111&#x27;</span>, <span class="string">&#x27;22222&#x27;</span>, <span class="string">&#x27;33333&#x27;</span>, <span class="string">&#x27;44444&#x27;</span>, <span class="string">&#x27;55555&#x27;</span>, <span class="string">&#x27;66666&#x27;</span>, <span class="string">&#x27;77777&#x27;</span>]</span><br><span class="line">        <span class="keyword">let</span> pool = []<span class="comment">//并发池</span></span><br><span class="line">        <span class="keyword">let</span> max = <span class="number">3</span><span class="comment">//最大并发数</span></span><br><span class="line">        <span class="comment">//循环塞满并发池</span></span><br><span class="line">        <span class="keyword">while</span> (pool.<span class="property">length</span> &lt; max) &#123;</span><br><span class="line">            <span class="keyword">let</span> url = urls.<span class="title function_">shift</span>()</span><br><span class="line">            <span class="title function_">addTask</span>(url)</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>














      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/03/js%E5%B0%8F%E7%9F%A5%E8%AF%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="The-mediocre">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
      <meta itemprop="description" content="人们愿意相信一个土匪叫张麻子，而不愿意相信他叫张牧之">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BLOG">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/03/js%E5%B0%8F%E7%9F%A5%E8%AF%86/" class="post-title-link" itemprop="url">js面试</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-04-03 18:25:38" itemprop="dateCreated datePublished" datetime="2022-04-03T18:25:38Z">2022-04-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-12 12:02:22" itemprop="dateModified" datetime="2022-06-12T12:02:22Z">2022-06-12</time>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h5 id="命名提升"><a href="#命名提升" class="headerlink" title="命名提升"></a>命名提升</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fn1</span>()</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="comment">//不报错</span></span><br><span class="line">fn2</span><br><span class="line"><span class="keyword">let</span> fn2=<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125; </span><br><span class="line"><span class="comment">//报错</span></span><br></pre></td></tr></table></figure>

<h5 id="闭包知识点"><a href="#闭包知识点" class="headerlink" title="闭包知识点"></a>闭包知识点</h5><blockquote>
<p>《你不知道的javaScript》对于闭包是这么定义的：函数创建和函数执行不在同一个作用域下就会形成闭包。<br>MDN对于闭包的定义为：闭包是指那些能够访问自由变量的函数。<br>《JS高级程序设计-第3版》对于闭包的定义: 闭包是指有权访问另外一个函数作用域中的变量的函数</p>
</blockquote>
<h6 id="作用域和词法作用域"><a href="#作用域和词法作用域" class="headerlink" title="作用域和词法作用域"></a>作用域和词法作用域</h6><p>词法作用域就是写出的程序所在的环境</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">let</span> a=<span class="number">1</span></span><br><span class="line"> 	<span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">   		<span class="variable language_">console</span>.<span class="title function_">log</span>(++a)</span><br><span class="line"> 	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> f=<span class="title function_">fn1</span>()</span><br><span class="line"><span class="title function_">f</span>()<span class="comment">//2定义在内部</span></span><br></pre></td></tr></table></figure>

<h6 id="词法环境"><a href="#词法环境" class="headerlink" title="词法环境"></a>词法环境</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="number">0</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> a=<span class="number">1</span></span><br><span class="line"><span class="keyword">return</span> <span class="title function_">fn2</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn2</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(++a)</span><br><span class="line">&#125;<span class="comment">//1定义在外部</span></span><br><span class="line"><span class="comment">//不能使用const</span></span><br></pre></td></tr></table></figure>



<p>执行上下文: Execution Context Stack）</p>
<h4 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h4><h5 id="关键词-词法作用域-执行上下文-v8垃圾回收机制"><a href="#关键词-词法作用域-执行上下文-v8垃圾回收机制" class="headerlink" title="关键词:词法作用域;执行上下文;v8垃圾回收机制"></a>关键词:词法作用域;执行上下文;v8垃圾回收机制</h5><p>通俗的讲就是函数a的内部函数b，被函数a外部的一个变量引用的时候，就创建了一个闭包。</p>
<p>函数返回函数</p>
<h6 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h6><ol>
<li>内部变量</li>
<li>不会污染全局变量</li>
</ol>
<h6 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h6><ol>
<li>内存泄露</li>
<li>浪费内存</li>
</ol>
<h4 id="let-const-var"><a href="#let-const-var" class="headerlink" title="let   const    var"></a>let   const    var</h4><h6 id="var"><a href="#var" class="headerlink" title="var:"></a>var:</h6><ol>
<li>声明提升,不会报错</li>
<li>没有块级作用域{}会变成全局变量</li>
<li>可以重复命名</li>
</ol>
<h6 id="let"><a href="#let" class="headerlink" title="let"></a>let</h6><ol>
<li>不能重复定义</li>
<li>块级作用域</li>
<li>无变量提升</li>
<li>暂时性死区:块级作用域内含有lei,则不会看全局的变量</li>
<li>函数内不能声明形参</li>
</ol>
<h6 id="const"><a href="#const" class="headerlink" title="const"></a>const</h6><ol>
<li>声明简单数据类型不能改变</li>
<li>声明后必须赋值</li>
<li>有let 的特性</li>
</ol>
<h5 id="weakSet-WeakSet对象只可以存储对象数据，且只能有唯一值。尝试插入非对象数据类型时，会触发报错。add-delete-has"><a href="#weakSet-WeakSet对象只可以存储对象数据，且只能有唯一值。尝试插入非对象数据类型时，会触发报错。add-delete-has" class="headerlink" title="weakSet: WeakSet对象只可以存储对象数据，且只能有唯一值。尝试插入非对象数据类型时，会触发报错。add,delete,has"></a>weakSet: WeakSet对象只可以存储对象数据，且只能有唯一值。尝试插入非对象数据类型时，会触发报错。add,delete,has</h5><p>WeakSet存储的对象，如果没有其他的引用的话，这个对象将会被垃圾回收。这就是冠以 Weak 的原因，同时也意味着，WeakSet是不可枚举的，也就没有size</p>
<h5 id="weakMap-键名只能是对象"><a href="#weakMap-键名只能是对象" class="headerlink" title="weakMap:键名只能是对象"></a>weakMap:键名只能是对象</h5><h6 id="toString-2-转化为二进制"><a href="#toString-2-转化为二进制" class="headerlink" title="toString(2):转化为二进制"></a>toString(2):转化为二进制</h6><hr>
<p>writedocument.write 只能重绘整个页面<br>innerHTML 可以重绘页面的一部分</p>
<p>0.1+0.2</p>
<p>js采用64位双精度,符号位(1)指数位(11)有效位(52)</p>
<p>defer async</p>
<p>defer : 文档加载完毕后window.onload触发之前  </p>
<p>async: 异步下载好了就会执行</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/02/git%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="The-mediocre">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
      <meta itemprop="description" content="人们愿意相信一个土匪叫张麻子，而不愿意相信他叫张牧之">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BLOG">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/02/git%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">git常用命令</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-04-03 00:07:30" itemprop="dateCreated datePublished" datetime="2022-04-03T00:07:30Z">2022-04-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-12 12:02:22" itemprop="dateModified" datetime="2022-06-12T12:02:22Z">2022-06-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/git%E6%93%8D%E4%BD%9C/" itemprop="url" rel="index"><span itemprop="name">git操作</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>138</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h4><h4 id="git-add"><a href="#git-add" class="headerlink" title="git add ."></a>git add .</h4><h5 id="git-status"><a href="#git-status" class="headerlink" title="git status"></a>git status</h5><p>查询状态</p>
<h5 id="git-commit-m-“附加信息”"><a href="#git-commit-m-“附加信息”" class="headerlink" title="git commit -m “附加信息”"></a>git commit -m “附加信息”</h5><h5 id="git-remote-v"><a href="#git-remote-v" class="headerlink" title="git remote -v"></a>git remote -v</h5><p>查看是否添加仓库到本地</p>
<h4 id="git-remote-仓库别名-仓库地址"><a href="#git-remote-仓库别名-仓库地址" class="headerlink" title="git remote 仓库别名 仓库地址"></a>git remote 仓库别名 仓库地址</h4><h4 id="git-push-仓库别名-分支"><a href="#git-push-仓库别名-分支" class="headerlink" title="git push 仓库别名 分支"></a>git push 仓库别名 分支</h4><h4 id="git-checkout-分支"><a href="#git-checkout-分支" class="headerlink" title="git checkout 分支"></a>git checkout 分支</h4><p>切换或者创建分支</p>
<p>git branch  创建分支</p>
<p>git add -A</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">The-mediocre</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">71k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">1:04</span>
  </span>
</div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/pace.js"></script>

  





</body>
</html>
